<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers




    const secretCodes8 = ["602507747","903873479","366336265","360914426","439651206","797479134","599405642","634870245","385119374","786584700","439378617","900743550","694489874","787810101","721065069","203521596","559689670","647602674","945188462","316022934","562032137","658644961","935662168","576970996","101012168","432086356","674426320","917612173","886093110","315474104","916614882","168326636","449912889","717203826","893998422","962129624","973586512","866458094","513012505","262805001","929898555","356996928","597601017","700747293","206243750","376615302","674154520","321096977","117106930","795950968","322270362","489962859","845146646","777943383","496985911","172460346","337724109","697374300","377680575","820214164","183049510","181986193","799544419","805089130","614592194","605509471","403743344","960727717","514416690","130121771","632409591","400368695","104736262","524054029","641079117","543272840","234744906","376492959","261352087","786364836","647358747","337742277","159322276","711629444","714444674","641711790","630177592","145550434","627158337","905877783","170809273","877829365","786346336","522697275","693396067","240947649","360629459","177650266","910372666","678363847","780738976","774016468","408663604","856640846","395066088","855319431","342060389","937033768","732526051","725305491","206380529","597835942","240534063","590262304","939332593","333124110","192324418","314376648","790169077","148918140","439221830","143116756","905725302","582871994","108424645","787707627","716781974","194344015","900190984","559073051","351243712","899505173","838286342","718690623","238373251","371898302","822191554","855003438","675943867","619912149","623537727","248872576","616027282","730609818","233661871","248047844","353210472","490020618","446629305","466766271","884637895","473145102","247051160","436347678","288917913","140055363","910008689","112141250","190116933","418230514","810541401","116316801","380374415","809106871","636458158","434479035","597699833","725481127","730692427","349034399","311559960","837045746","115179145","104614283","173110497","607434352","272924232","295767008","386877251","985440861","349202708","936950540","728207522","778418154","726279376","794386636","501788214","236456934","788335087","130806218","478258353","704875751","455244589","270360750","949418716","193584068","846627376","909948109","727716300","582386270","683098380","375309243","439961446","620339251","710395447","339939951","480861042","794767986","328547802","990464946","765074405","725330546","547067382","713901382","381204601","517154613","895979674","374941002","986555184","458212636","284809473","360517363","141397562","131370410","206635888","692253411","610393468","933249049","866628800","512595444","683703936","695864367","170154614","130080965","138721147","654322355","654122447","477483283","395985344","354513558","737402887","493994466","747825033","609747419","295785769","224212420","793567500","978074761","760412134","593169064","712251788","317935192","113657393","483874637","987533141","381890514","112063308","167653911","902874870","723494311","204366110","982707077","410930010","668724079","730112793","709449446","631606571","784852833","259910780","814472124","608466513","753256113","396809088","709950145","271375363","205620623","557789675","912835642","644801584","277980061","576483211","241694947","520486942","665027307","414570088","859316838","605430766","203610922","587333256","464421383","614601594","500620396","507834554","636064646","288085769","894937027","871090318","863844903","869588883","722215278","735727562","701034177","207548092","100257072","989745615","511985793","979842638","654538700","516066458","868777460","764530385","633233445","186326773","719032976","961071754","917157177","397222310","351061448","214206288","731553036","692829154","977673235","138524831","297595429","216009336","654188911","118148782","625657573","429121024","559988995","455196654","759531148","322322535","990621532","710758260","610617176","456533620","412246070","690776483","103732463","281995015","274965952","958183911","841529254","974874259","559411821","957914975","564484292","643031338","139872341","620043409","946499282","538318309","544350758","742435506","612945244","504684098","323719460","445356135","617391067","171489293","344696843","644473512","606811131","915973183","185512925","241138136","921805133","729405409","634191997","858851621","559277122","433708551","101400722","252006312","677211595","675676321","776415143","876542738","832183567","794943383","120614805","976569339","285209722","772922496","463854878","325178608","627554573","546118163","705140156","923853257","615152721","235397981","852674334","296558450","237445620","227423710","879121768","160290761","650755511","466723759","679476262","210558542","778194653","749150615","505931983","760645134","955422947","426673610","754231098","995433430","109787466","886104827","344877903","791005251","446407320","895580111","383610664","813939737","487407760","810450578","306596233","337289138","398408083","723205330","418287314","547695814","228944504","431561532","296725356","242169975","730263967","951220214","531876347","382687160","615091868","248254270","637218614","704768725","342191822","406832586","278996351","515246763","229108731","108833459","758824141","562248011","697010199","220997436","547369877","134524103","734099263","801446972","930374952","107368303","358171775","804154438","443341512","115021713","429509497","503148556","134830477","301486243","459937811","766053614","734559579","956043332","294383160","141724204","947073300","795062473","797237025","979190021","220393372","805545461","959132164","308882564","438280479","212476950","252678972","468932843","147881552","689560851","262947535","742858539","694460940","865566814","243401344","226271382","103310324","240993359","627431122","389869602","400061680","720017418","241170007","893204318","519571222","400906686","259601392","993024932","777683833","945419439","715519692","342524569","448782919","495032621","306337403","621976112","297837712","288685996","633437226","140453278","755016319","177351569","890461820","349820746","216991766","589168684","429870459","643842316","961432614","970199421","870351153","275930427","715588862","125557423","134317859","834541746","211382052","599999422","853813036","774309817","750280826","326470240","842849994","871425403","757807170","845145966","701507926","602220512","236540909","739511668","687487660","973503133","787567620","321196231","214485029","486109458","968852220","737082813","578539211","640341648","357964291","155955655","161940963","808938911","433980498","920737765","702568352","916065238","500404567","529830344","243173001","431751808","860999624","151248841","648652509","585759603","423755498","732649396","249128323","565935833","330918323","588813958","367697637","813770232","281581124","156039599","775210639","443910185","997113838","411533952","305756946","980765921","963987589","625139813","502535903","736287151","131087010","339480907","147306481","686462019","457879993","639138857","668177859","806531300","239484164","365674020","234828774","855974794","490165198","434332623","187139423","101501729","257780172","349093743","942681129","159008907","201168289","836205345","765075034","484627760","989202319","553145738","374764696","712053800","670445459","477003711","518903684","542496044","643348200","391960307","466927252","179877780","607388899","629725864","841278515","796553188","656277875","462837940","508687042","696967548","885218483","432490713","416143129","408030948","330778765","822236349","502511284","702624640","658026397","521063266","409092277","470124423","344362385","932883002","725572498","409919936","145940676","268753710","249754911","314102135","868062001","427912023","237253594","659243865","467683793","514867692","658225805","889081070","636052248","709027840","155935151","363571193","582876717","927123069","204978261","595122379","168154231","277945923","238915827","274185769","526273339","251437808","383014017","148705732","858473375","569381433","648523499","894083746","117948702","271036771","232987008","138735245","767337786","207445692","704171986","587222775","711787364","745422526","406444212","438405294","485243429","749833938","992955275","942853040","528784445","930278108","630381797","912271978","161702891","626806901","562243303","809092283","888679363","845319356","893697714","135767005","222608570","551985465","861885719","114642015","873906979","672056705","717210791","444113654","623115562","778286761","233264038","500659289","158667370","411633935","754946782","546875409","515690070","545174568","379944995","131123346","101749089","586615294","804375253","516515597","334657170","575201699","538146902","999320248","107589295","266570182","210643944","663342902","928638009","564879633","854409929","666926218","922275106","301545753","680639216","108252816","859514001","434333482","691560248","659063082","563999606","841066358","338588812","741092796","785348645","488525425","545098203","576724228","818930380","900347634","356266419","602815250","409041814","439642053","197762123","270923847","927450466","489105495","859915014","336290602","840647768","371620267","453378077","652346271","357524181","244365081","427677843","654881496","952056273","357136726","823101113","622631899","291806920","741838749","884511885","376143370","652611375","594783323","297211281","656088539","505716317","804741012","129311827","286201027","740508226","630420553","450746547","696371325","131644474","489315173","127096499","346771429","849052753","621148780","909005084","902029661","659897581","522073029","325758484","227435385","547951689","226753215","315200094","585038776","581732847","318430807","841059696","504080421","509020293","274491961","328259218","244607670","293003941","209440674","960429960","800565095","951972392","673941959","554629962","292570490","472144375","957181847","842689973","190442371","517218431","832766558","757113786","768470170","177878015","831309670","168215101","823200629","802791641","499405497","645606806","322268051","180832098","370892984","242967119","189082435","896276176","146097132","292540679","653119773","715641384","554111716","415215985","528694186","958944642","499112197","580499104","397041059","422513531","363648128","192339507","282004790","768032668","930639133","270473965","555077316","884730379","918224474","992872862","753984008","407355235","842105803","574844588","697106659","311779032","947190660","376670042","357312060","539296766","238886757","514436496","626477668","863689736","984626167","615300695","945155487","418179787","475087045","851572286","311830999","405850247","206336621","765017834","160764400","803771910","184812794","896914136","719553640","454640355","216985435","215139858","399000095","936733455","370994846","627558768","911936322","492402304","813454795","266683808","698795967","450512859","400059412","235735665","850397846","212335491","680378604","866508283","918430126","639758538","216170721","303479295","852137658","709451045","138362342","368830546","101608443","353025646","548418177","224825360","815471643","624478900","295500518","557431913","164018406","222875174","682914071","759348833","766593800","479187974","369916284","155633133","228427889","701120227","674668765","103450292","679661996","943048032","826353438","666428907","333442484","549456702","732116688","980795563","463514653","305055272","282900867","227706038","566078973","685587349","829964799","525159176","939614941","752432538","942090237","377576193","908029518","852994146","545833584","482679391","497031423","587051166","886402770","982010879","676290202","831548743","262549861","768671882","180558778","880694780","374544097","913345869","941851003","186359032","340645421","255989177","177519120","612976244","837582293","629552294","836278637","603421300","298501971","901625561"];

    codes = secretCodes8;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>