<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers




    const secretCodes20 = ["7882435000","7268635436","3560977644","3085853926","5673093064","9952322970","7761996975","4916363637","5179641549","1567393162","3991044762","4592051302","8858037587","2965528208","5962983603","3892469980","3425746663","2490471513","8385303038","9521307044","3740040432","9647481751","8608068397","2164509608","5877274414","8816662977","8077849940","2984394908","4150649875","4071566260","1944246239","4721501563","6419476572","9265956632","1555301436","8456875174","6589052720","7182598297","9728037122","1429744644","6099134052","4118617080","2548474572","5926510452","9170301642","2030133214","2372923816","7565683189","8567918445","5228561897","6591864011","8918377048","9828401226","4015347680","5676473830","8850697648","7137782002","1878010309","9536740163","6865735944","3648998053","6549481845","7983057025","2355992125","7312326475","8911838353","6450898546","7049667991","1540503324","3490023614","3442905188","5854906396","1168816524","2998514507","2863645383","9352856924","7581984167","4982238913","9513510054","1192262621","8531886802","7252604764","4400322976","8808737079","7785767240","4524316659","3974110052","3267293299","2731066455","5132006184","2735115648","1361446952","4527175798","8408603783","2459966133","3968767065","8996098365","1505849500","2982782372","9784697355","9440411858","1851402247","2971504629","6144919444","1295319084","8304538563","1559041587","9797924182","3152069184","7218424376","5216848375","4849509939","1959560548","6574226116","5022089966","3192557210","9623556111","5466682560","8557954751","9131960294","7668566741","7779973376","9374021342","2002491703","6793708725","2620019970","4475835645","8639352160","5739090275","6933724285","7247376418","7923988074","9770479482","4330791558","2991203896","8682011137","7036215548","5729618342","5101667822","5408303834","4517100591","4805843564","9041800474","2984187358","3738867976","2282779407","6333147786","2056410126","8302545914","5122511942","5134144113","7953347589","5686021148","6517797310","8737595024","6106450517","2161137665","2960371610","4170175417","5545354031","9809471259","6902514522","2468650383","2325529400","2741104095","5558638598","9526448401","3362584770","7470214128","1314665730","2736811985","9759330363","9600408312","4180416036","1722795061","4350309099","9982708189","3593927048","8155544804","6656282062","6935878802","4534513485","1114001698","7778672114","7978519240","9296252502","3115354524","7264003682","2613122647","6627990808","8860872488","9920373301","5898572895","6524419207","5658180749","1419082764","3928423928","1677374163","7969731412","4812848084","5683857468","6067109180","3653435670","2289714644","6253258650","2121710810","9860397633","8787506992","4519274454","8204613856","7201313725","4441369436","2904323898","7056091318","5223403659","2597825927","6942491043","2100640467","5388823790","7317171562","5813273061","8935569972","4297321248","5499288732","5273580075","3642878417","4310185427","9242499987","4198883057","1342759277","5813532287","4848640050","5508033720","8120183910","9546570349","9973057660","5784358452","5143487371","3266673388","5338024130","7446664460","3171746443","5371648470","8789146982","3004664228","2149210952","3160510556","5931617225","7895030999","1582389093","9190212322","3864638426","3220000407","4325997331","9647102587","6693499963","7642476359","7198593321","8820208299","4473654317","2864426172","8088550083","7450401277","9135565620","8376032060","4671024358","7113294794","1737877951","8205505738","1770962464","8608750781","8538542887","7590916439","8691558688","5236418754","9940950182","7767481799","3056363092","6263531121","8139831593","1762448584","4529305102","4085475945","8259259779","6007628303","9711483954","2679338613","1508304581","1499725585","7138326790","5542917838","8430943275","4846879349","2422451613","1262542250","3405710849","6537544949","2423888138","1510194071","4012116880","9557831399","9737115682","5190754165","7744048651","1003839697","2366427852","6709107687","8449608341","1729982448","6141076444","6101349561","6289269315","6545108240","1969464021","2592278994","4490615635","8947901810","3683606032","5844941341","6793801454","5905189941","2089289194","1590055665","5325726842","7340700175","7492293203","8222302904","3353525137","7488970058","2668015366","8022624515","9373978927","8485297175","8203033421","4411985669","5428629690","3336106013","2792793186","3554400972","6198305462","4167359357","4519765616","9251720674","1226900483","6517722801","2949845488","7869822999","6309248572","3593296662","7505079792","4738707597","6841179806","1533815687","1917055140","7770725285","3892285443","8777842629","2989053123","8158963356","1320777501","1141530571","6868483589","2374613008","7160938274","9220869072","5836684862","1420900908","2501840192","3477428563","6432235666","3276980720","8898387955","5251159049","4731573520","9752317941","9358892282","4264190363","7116351465","5488024785","3486263600","3489394146","1611309310","6560238993","6960180563","3757020963","1842649108","5185278623","1390780463","6895455461","4853094620","4111213193","5886588830","6304722925","9203584184","1854862889","8206799302","8671710044","5166938231","8578906764","7352600640","8358747360","9804474805","5497719264","4908703873","9072709849","8417557262","9661910552","2242034988","9993489849","7704195003","3362978044","1367302330","2908856150","8529228150","9217146624","3830373078","5674993026","2483956086","7386344939","7676252721","8348608909","6152573452","3539532187","7911563969","3996010650","2858266958","4529843580","8940518083","2562069335","3761197342","6827773722","4112591997","1697205973","4927367519","6706721125","5121369963","4056567665","9440109446","2445560281","5207041417","4671390788","8727347954","3099641967","6741728456","9542861931","2925179476","2039704665","1499272657","1056967223","9622362639","6676588162","2852335278","2695528433","8401646725","8687906286","9471987444","1325239041","2761414539","2681209393","2840672502","7398930805","7862654327","8707791787","6134167221","9356580408","2479789520","5541379576","9726140628","5085495321","9318648133","7766560877","6266464469","5700048572","1168029093","2332160682","9253009776","6378433236","4998790792","2938039461","4557064196","2775192703","8868600341","2901898209","9628663817","3581597880","8813965881","5895827618","7074281546","8992823010","9062238207","8344531665","4220407627","6437121214","2909723996","5607749385","9181280403","8715805494","3861991623","8013039801","7422570935","2097802249","5140446440","2989444372","4789380056","4827681963","6970451066","8647295695","7132343758","6707486122","8641914566","4976076245","1906699748","7540875640","2009248617","8544934597","1919258880","6076720418","8798507579","5286779856","2038581312","2203922047","3507921730","8406112456","9608658077","6403111990","8209456321","5737700343","5004474275","6688211106","8422137170","3033351005","7044516412","2634453805","6122220437","4556842282","2068555864","4486736724","4114662332","5764221335","9046737117","6215528514","5472536314","4068638516","8952136655","5948342860","8804164105","3363828215","3110331023","5224780373","5075977375","6236328911","6268132857","5576754869","4954566692","6991746381","3800350855","9792574631","7706126992","9999886035","3028606982","5484319027","9684724649","8040574032","8754021046","6476313914","1380754997","7595982546","8438760693","2705761303","4015477969","6868902098","5035719194","7167387981","4036655688","9848368562","6914317270","4003933302","3680708166","7129489844","6761244737","1265466758","4229372582","6174508210","2813452361","3917928511","5112523308","9809917109","4036958272","5465438063","8613779865","1182451368","7034223599","2640159045","2647746320","3994732651","6431690995","5209357797","9250022846","6165264580","5591472676","8407701474","7632766678","8565386657","7065642246","7071050055","5342613061","5675896696","4124793797","8952669862","4156631574","3874846414","6707423610","1526276688","1605965865","1185537277","3812844673","1054205041","9689418302","3429612096","3193938698","2176231174","4417289032","5207032933","2182874885","8602943455","7369964005","8795473532","5916480399","9086383167","5626682305","9192594465","2225602504","9363643107","9454443895","2932781608","4143472829","9341266519","2583712423","1017316489","6216785468","6345948638","9628730415","8918886746","6557141883","1219832509","7019835094","3328260183","9867466675","7028331449","1850030349","6854207398","8733203041","6660064077","1811531916","5975983019","5127442716","7906408889","9305978346","9520756529","8195459602","9320436025","1239935083","8545789726","8326198159","6472376030","5853487399","3266234516","7997767931","7952936288","2997622454","2358307686","2482319817","2033124562","2782574659","9242473160","9365582408","2775006854","2558320892","4544230113","9008761226","6366374430","6405831939","4662071695","5850494793","1047853333","7797260609","9413272643","4337602995","8876086321","4352948728","8734057357","6930689327","6132758779","1361914414","3174454110","3339721664","6349204745","4476182906","6051476038","3968652003","4887736505","1179462263","4898683969","6208081149","9243970338","5313056274","1887452408","8834442777","1892739723","2777665893","6594504698","5885740987","1880693715","9036150911","1860059546","4896174904","9818396061","3415216230","5929530666","9566025108","2007531455","5052372740","4224218000","2176375520","8499005070","1654857794","9442338436","6071524264","2681664268","7857452103","2816159815","3399578519","3767735835","7075184525","4061924120","3367960970","1959605376","7751962305","1402931132","4891942236","8129234222","4310961801","8548104264","8105939525","5641082362","6307860416","3388921084","5813685489","8963842374","2361502204","7646986234","3201218983","1959517319","8623758297","1897591887","7263256105","8271407482","1218699333","3325145489","5781544408","8005556835","4829169370","8508912740","7328439732","4247907975","8061045443","7794614917","5256620411","1614690346","3020722415","8089840175","9042038407","9860678174","8590063384","2186934106","9428187442","5894250827","7285932335","7754932357","6017089206","2446097918","3831643332","1195541091","9470534471","4502852884","7021482925","8900097679","4720989014","7281766795","2864619249","1101059600","2991618659","8115719322","2465517814","4544326478","5531870127","7582081572","4198665672","7947838798","8460009834","3857026177","4208538181","1123782458","4708777037","2303414193","4545441376","7062945962","2673312655","3413249069","4335101998","6265671363","2241172647","8133565041","7894124662","9545231139","5313534596","5499223729","9135323437","8389398391","6063807614","2898547317","6540087745","5752319897","4999136805","3291039180","8209016846","1654888466","1248204651","7541148925","2748863107","6814159638","9148378192","3546994845","8820445495","8141852984","6793666013","7400223434","8442832024","5428930347","6036392732","3856542903","8555503826","1508720894","8534049327","2218411148","8956202738","5296745867","2943607492","2299095395","3057501707","1820519945","4159052358","2028260666","7280518802","4187080995","8745365831","8686292021","3248070794","3672791890","8107004431","9435746164","6791032504","7118866400","6638799257","8842418117","7487806307","1250170096","8551479505","5946680916","1925811869","2623498124","6479537314","8707481347","5739807122","8093847093","9493421072","9511527383","4410544422","5524034941","3439846414","3032953511","6099430217","6283581356","5987765400","6188331236","8006867315","2667564971","6220634535","6806929907","7536591317","3684821367","4487152915","8784007102","5554564035","6617423042","2759610197","8079254320","2192374952","8060326107","5942427314","3966913776","6644531533","3247908045","6022168570","5997043484","8514887727","4930414028","5814075212","3248805901","5885517447","1067656879","3718440765","2464892162","9268712187","1335056626","8586001621","4702747366","2788529168","5621906929","6571161291","7431891185","9902460549","2196585550","1673255150","5240978482","6196139823","1919364302","8288551512","4787986134","8643278133","1769148014","4588449923","6387452361","7609629871","2077110333","1989540156","5711943150","5518445313","4754312649","4536079100","7800132635","6672795372","5021696852","1729364211","7856266135","7296271535","2779296819","5229705642","9266080327","2369463331","4381699561","6906971968","6116844508","5760088406","3300675704","3320403465","8844843386","2624629163","9891652024","2768973555","1775057165","7199558952","3684081420","1911745524","3364739164","6519267068","5777231630","5842278353","3411591543","7524266390","2662976130","3565998329","3909070193","6428869527","6679914766","3608056255","6875577568","5558229028","3703825756","5921237964","3785374033","8293536216","8383326695","4390398960","2037685641","3919584105","5099247676","7117885934","9395464612","9475521237","6112879152","7489654258","5570714131","9876232734","8221973599","8701262477","1948345775","7245318394","1385854907","7713977043"];


    codes = secretCodes20;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>