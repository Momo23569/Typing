<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers


    const secretCodes26 = ["6365313621","5939896854","4201062863","3585148238","2743692993","9641082166","6855684407","5044371519","5888762801","1791377865","8996271036","9739059678","1494946635","6721634522","8062505177","8104554488","1842164650","2662453266","6709738484","3257861070","8474683230","6614287378","6757196762","5964775846","7871735914","4495048349","6442265088","5979973837","5466563692","4243365212","2521860667","5858871507","8410678471","2563937429","4257428566","4522169018","8349885462","1923932430","6772689647","3048992442","3775853174","9744924541","2949249817","3935907120","6002848670","8277985852","6432669372","1737360374","3406573895","9270275608","7325152673","1366597361","4308806038","6371565217","9659493510","8542004927","6835812227","2001226623","9503660910","9291053723","1932465781","6573269550","1025332689","1649685939","7104124689","7678743224","5181340341","6867553315","7927665317","8912946471","6016554463","3241858027","9037034386","7860839770","2858645164","1544842259","8335794698","9967362293","9003133944","5583076023","4313244818","9323800324","4372752208","6523844321","5588760363","1564808083","2723438957","3632306170","5448519636","1889629831","4140101704","6510578994","6166324678","6037764735","8894146039","4533690316","5342638765","9956789082","2806661981","7196729788","6693159819","2421553251","7705366390","1728317586","6905477554","5561489455","5421308655","9788620704","3802935772","5375517732","4628311740","3431504984","9638167566","9194655244","3546554218","8447145546","6990506996","5924653278","5577509625","8486066831","5623412829","1928588853","2722308495","6684915920","1235991288","8655809538","9764076090","7001442410","5555078398","9940716046","4336106394","3466057443","2126635309","4433918418","8895491494","3771989713","9507858327","2993302833","9371439930","6607420819","8376563380","8862812618","7546172274","6091096372","7867974983","5337760557","8742007985","2486924438","9450124077","8310793068","9492300236","6707275873","4159139570","4453376762","4476347001","8388877342","2214715178","5582307149","6993839509","5798532242","4291441276","3642360755","3548079741","1256867160","1691022346","4426469495","7493747803","9714279612","2000672409","8902304297","8181445537","2092234228","5830267559","1394922138","2811359756","3795392381","6146971938","4223009609","6660522887","9006800238","6764657984","3627279963","2999950352","9946907453","7715093826","2385691228","4895525568","7736837887","2841079248","5433458304","6337998136","6306708419","3436316420","8077464580","9306251953","9950375368","5194836908","9867623151","1156239128","7218538533","5359773655","7924871753","6546513293","8681714444","9298595994","2422462057","4486481845","1648533717","1786297144","1016277464","6165090617","3281373925","5158223815","3241672125","3429971127","4003321155","7751781667","4796350652","1374283738","7469159509","3704532190","3216528014","2228568681","7189386736","9067114220","2070812143","8025503394","8823098680","5805766019","6093150418","2229257449","9316537573","8693180702","4955234261","1596397125","9382355941","4213421073","6229741801","2239469759","6888719976","4656488749","6137403296","7834605289","9867396353","8992339434","7869226724","4600662461","6687445554","1481604593","6064771399","7426893937","3144068802","4922289529","5337018873","8563043277","6014223496","3113243361","3129946294","6409908511","9914442243","4953880550","7328299902","8533393708","9575109304","2342969191","1979870423","5049110213","4634334293","6531534625","9654624144","2602383833","7353947034","8280998860","8192552672","8163116640","9434072520","6978089804","9495101747","7887305223","3732764661","1368805791","4438127567","6036073771","4000047365","8528352431","7577168733","2143248560","3758009464","2439515863","2373174737","4326844399","5016686444","3196408296","3152852484","4944708479","3258579246","7900594985","9485841275","4505274307","7694624472","3745603197","9541595990","5049673381","5333208468","7151614666","5136321710","2684248148","1647348862","5880080254","1938286231","1944809803","7977911930","2697211301","3569536528","4009724187","1265700637","8086599858","9772379034","1643785700","8578242512","9978100000","8790106607","6130885897","2157545931","3494023991","3659981373","8043960958","7151662666","8350215624","8211161610","7574106383","4678210339","5223677308","3931164692","5049987660","7317729471","8997646303","6060637294","4596090507","9400221286","3455691959","2768298586","4317459842","4655393023","3320931389","5023503794","4473808107","9756614130","2785707143","2389111479","8191847276","1266904217","6299489551","3479456734","8867946897","5042588164","4952663096","8100477181","6635274420","3258625395","1631304366","8160197476","7101203256","5563816100","6946043013","6048294551","8653519909","1334025649","8587418544","7631825059","6364565290","5681405099","2836349831","7889479032","3329376614","4799004933","4325712144","5790563233","3747981098","2857728797","8563397289","5963950811","4865044963","4132407397","7899566287","3372221444","2089207608","1350541773","5452886381","3265087698","3655857070","4448577854","2328704265","7305550499","5257884663","5461277485","6857402453","9245084846","4413811156","8434373963","4917375488","8026947669","1900656532","7261129383","7021872601","6071913759","5658115530","4723136925","1599506433","3852856772","8092218607","6585723997","8081619394","6385467918","9631408744","4662340605","6206906193","1000829170","1123864467","1069910425","4994154700","2260618952","9967395726","3921983767","1895904875","1543559636","4152127697","4363119931","3518256863","1543287952","4159157965","1597419446","1011317281","5496189315","5393928314","3961710713","5403410135","8879260556","3071684937","3911549706","6197667035","6490948075","4530360400","3868172613","6921350871","1951478218","2655888366","3174508661","1177919770","9276784199","5316681230","9002333405","6153668941","6417922878","4734231912","2391454696","4800699898","7816479821","3235679900","9264700726","8865409887","6024343803","3631258166","7288091673","6514494132","8493596258","3016222233","2039365113","5600924069","3957996972","6501568651","8124039578","1818492920","8320776736","3658641063","5293519452","6830177149","4395073922","1876935347","4998953436","1383377440","6918713945","6687509973","3269151377","4367744440","9103581615","2272565229","8495887985","5783942007","8374543480","6431627934","5219720442","2546998431","6234926458","6065170364","3020824799","2574267434","6183857800","8566611776","6498095283","4881103308","5432779976","9480327208","9922086568","9282628513","7685797943","8575437465","7927917212","9599640087","8167413385","4939644677","9324406928","7001441765","6820933140","7888378964","2088780515","4205370700","1524012868","3812876455","2695677081","8548860678","4144348554","1432895076","8292104019","5335330311","8803817269","2787957246","7374166610","5445199765","2941112660","2410508447","5203600760","1973260259","7215823653","4366860459","6260394046","7725745887","4635406749","8687141403","9280570449","6085632668","8446032976","6619740579","1562111931","9622635453","3016427526","3311099545","9226890430","9115382911","3390411342","2965288194","8086117088","4101818362","2202251812","6162041439","2856394820","1043582025","5075344306","1473861715","9172447248","1449626693","7745483740","1444391546","3637972049","6129519194","4954122988","4235574852","2216117505","5825074191","8173913254","9371456591","4282519027","7667986761","2237802658","4623424200","5127091072","8867914015","6859026147","5920429481","1663077577","4359991912","7376437747","8091840030","3571671879","9460561287","2699789104","2556789759","8508581002","1061197400","3087462891","1372523073","8483634277","1893622723","4348796455","6544984322","6962054534","6553911294","6168330961","1874330476","5906921749","5172386486","1534756022","3038045811","2499993980","4075841508","7808142681","6179933922","9002595962","5032564375","8250801062","4207397098","9146383459","9746565662","8507891441","9515119975","2060143002","2651029113","2992561264","6652919440","4988754699","6811229109","7252552179","5844748145","2637885565","7523445428","9917477267","6247668283","1658349259","6842481277","2497774929","7009734574","3820441836","2691508298","5627326451","9387042641","7681472718","7813212958","4907528298","3860305998","9800759700","8315158461","7126737935","2610160624","2531299765","5204475880","8398136025","8695603448","8862497452","9230755291","2270170313","5178161499","5754585014","3019715401","4631553290","1707133131","5325476124","7288961339","6613935364","8893197424","1383706124","1651213789","9766173149","6292489630","2098392640","3036306313","9750633703","1048411998","3832837094","9979312389","6652439562","7954428132","9390114481","5706574901","9515596797","2564053466","3558700158","6820877039","9768359140","3483102085","2298485988","3326312810","9806849530","5142979321","5211774788","7796457837","8759228196","9459420048","9874696107","5575021780","4445237814","1627918447","2240154015","3896112788","6591237925","2682612850","5873264355","6625609127","5064368449","7888777828","8777692383","8036531994","4578725178","3211923558","3845526181","5126193846","2473298286","9883706543","9965424377","9730450853","9227878781","3176408908","4702822823","7109820604","5734192280","7248917204","5802535352","3916515113","4719524626","3179784082","1074403780","2663485190","9135571911","4522483098","5916336394","1034452155","5741063337","7075264315","1943015148","8333239468","6871299074","6957093411","1487128695","7502289965","1563445928","1709603670","4931209793","9987494504","2489960693","6658620202","1401480071","1750681387","7390381781","7827292181","4415401724","4710267546","8524508810","8203433272","2307483365","2471757302","6859288660","2168361532","5871471528","7946393653","5103390459","4317889903","4987072550","5674281961","5340525010","8330144563","8235029259","8972797144","9380623846","6595095665","1326575707","1646581980","4885105781","6723634566","4444610077","9516857956","5780873279","6389613631","5018936720","9007911512","3420199168","5139898542","7053648880","6021868715","2933961576","7669832475","1004453810","7168507818","1615493739","9207591985","8150404451","3938543936","3707723470","1846054299","4694794545","1130563425","5868573359","2933518728","5919787459","1276514305","3802070226","8643130889","9030059846","5172778443","5516985520","9075641941","4167656999","1050597878","4610080176","8432070395","1976143536","9642776321","2230161423","8361868733","7218616866","3171144737","7330846756","7321390656","3678956483","4115757596","8098352031","5147110880","7983854886","7634523783","5904529338","6224448433","5881233923","2784508142","4103925688","8302261675","7614428659","3071821691","4497022227","5293633806","8588818867","3405741757","8739699061","3081977364","4622948156","4698398419","2137918870","2960322326","1096267480","7860703235","3713579422","9091777861","4985673185","4041823081","4416207789","7196737225","4474910746","6776845887","5069342856","4444227545","1063624906","2546568475","1295317630","5280597630","9668863757","7870576094","6997856493","9980456693","2715530980","5400198419","5745007214","5584006737","7013768372","9892156197","1147255266","6214373371","2576656767","9932308192","6088876528","8337691235","2112193744","1086992950","6068055565","6291803080","9433972164","1212058201","5821475718","3788780687","4073266174","3256470851","6199340125","5300956381","9843234989","6988245250","7699802384","1349318773","3721649229","4300735829","7662128251","1527652315","1822348932","4031753253","1286909329","4312715602","9347009989","6936324163","8840636839","4715461633","4538144534","8924312287","4148632417","3330247392","8933641181","1316944939","4283102350","5781609642","6358715880","6143429556","6609815008","1295482789","8125471810","9459897620","8366122640","5676093649","9050612551","2384931674","8682829787","5338824900","8764375219","3403927766","8202485092","6433216425","3047485154","8622735734","4766995848","8187991625","4427388139","1704029293","6665899090","8487414115","5355009772","4201006926","9678548370","5760615756","6161087325","1238992877","4212998949","6213610516","5109731639","4749262860","9290352882","6253949864","5735631245","2801959341","5827158309","4389144153","4537704875","2631267186","8524378986","7671667692","1081377319","1504906429","2002830716","5693376204","5027873862","8455631394","9959874326","5404547531","3445900316","5842271360","4928056726","3122331621","1596492139","5472984541","7360886985","6885581335","2532106721","2826082901","4215645400","2769377354","5020080338","3169713483","5873737850","7378566239","9110815364","8304646300","6102970011","8478808053","9662176193","4893656760","4673318113","1225056278","6160633087","4209669132","2930507273","9442079312","8390646533","5464510158","4402091906","5176119650","4601587771","5114891549","4941348486","6116223722","2674266364","1580200982","8491407145","1465621915","7135677265","4233448273","8899425751","3534382932","1012875521"];


    codes = secretCodes26;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>