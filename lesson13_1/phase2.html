<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers



    const secretCodes22 = ["6960918342","2618752057","8948584813","6321392461","4391764087","9770159558","3620677652","6704590617","7611631250","3207390669","6296386269","7071187762","6607064046","3171987191","6380251693","3386295889","4584714634","6861600895","6583362763","2978837170","8524687465","9616304599","8690196083","9130693823","9959763636","8849021608","7220043529","4604256753","3121747648","8077213838","6242350704","7491640796","1513923706","7411818031","1687129945","9876329899","8421169930","2176030020","7569295637","4918109560","8586569657","2545357514","6660015424","4489105253","5774162018","6150484710","8812673011","6487074138","8889236778","4537899178","2087404146","6968833664","6083070801","4848651491","2648356698","1850945123","1153803535","5522118425","8773384743","9228135781","3253283666","8555184271","2517528777","1939876919","7310314551","1052993430","4776109991","7283251536","1011486277","4447732548","8598881246","8620039355","6777264389","3606934863","9274522190","6665950873","8873581161","2817932488","8766891172","7004648337","5504544063","3708974918","7816109509","7639247581","8445445952","8199194662","5889471101","6518086755","5022599358","5860102419","1968395269","3379321932","1018518799","5806787918","8050397504","7808837085","4190693085","6248200010","4184645896","7600198501","6074694399","2569316965","2706785997","5065947640","3454658087","4549163087","8962351104","9361384837","1162015107","4717589246","8471215543","1382838879","1354073941","4775442183","7482714092","1766867823","4348497114","3926793342","8105968514","1681342937","2430461628","5044664616","3336781690","4859335370","3711376765","9883220121","5993296223","7673422002","6682184498","9363003090","2993852121","1817021959","9147595497","2981450761","3165274347","2297545892","1304061857","8309231038","4778415282","7369661479","3536347638","5525565425","4628201976","7398658428","9836677702","9561590587","2871065479","9084692700","9882672922","1410579345","2713176110","9454114044","9861287874","1453122589","5883872376","8630196932","6633091655","1662655217","4839798302","1075912639","8132984587","7605865428","8769612937","2909964497","6525273234","4357657683","8730590021","9253911819","5759466119","5393530382","4102035184","7337365575","9382477462","2943161670","6984487013","7154192555","6362648190","2587427228","9575013280","4133634906","9799261120","6565460302","4593277944","2639612967","4574286662","9681430025","9078755570","7359482693","7249001044","8007120358","3826518960","9527369239","6960805487","4774851546","3428939626","4922569686","3597273035","5381533769","3630794248","6336401850","4650719989","3440731345","3765302563","3776644634","3079146597","3414523190","6451464790","4697156855","6422341435","8011716911","1738745396","4984896337","6917700001","7983023484","1121734848","1092684843","9157109863","4803960100","2692333114","7298171826","2696203680","2484662227","7440324504","7349342604","4333992901","3871177888","6190244610","7305937825","6302596203","1703874057","9118119954","8801629946","5009466361","1425287812","3271885291","7827408882","2534874746","9939857524","6499926351","6757771128","2541306109","4201755102","7560146576","8362418699","1069931499","9878278135","1731644434","5874215535","5396523588","7703935344","4513336257","9439987478","8542344175","8028971853","1567738671","3772428874","9121076913","4040848069","8810870596","6604143880","4547626165","2561335918","4850791629","8092550000","2603516730","9845803072","9995518431","6839657252","1946866304","3009152934","2076578633","6196517856","1117576141","2676410883","5649438799","2502679418","2523979258","4238801273","8820316610","2760241877","2297221088","2403689137","7842220356","9010069705","5901208205","1072107459","9366960367","8299640519","2277869597","1757320368","2673180617","3478035078","4593202848","4492601531","2122621553","5268854758","2360265024","9469173562","8394228517","2964185966","7311823827","8085089110","5384518356","1839260637","1402580452","3987156588","6129050748","8645702535","7504608729","2226838249","8457211835","5434830483","6572575967","1565744412","1270881410","8225878802","5570187032","5791336984","9150071823","1585533812","4207088521","3585303867","6499007102","8315391677","6318371902","8402360700","5676784109","4426692659","7757780391","2063338859","8940305132","4364938664","7259816671","1993969951","3677508674","3777378615","3235922866","7191259655","7017077801","3635771138","4524864813","1848287898","5902449990","9955361103","2851384004","6718535346","4172861585","7587449374","1694701229","9964998547","3038098122","6311989269","7949630694","2832292243","7589888125","5008729986","7960581967","4892659141","3376099994","7957412834","2665744658","8174121124","1274959168","8412327142","9823719680","1476048153","4098921395","9174818304","7714402200","4297676115","1027824679","2106589266","8875550621","7098413787","8144313355","9142997454","4744832871","8583791011","2374631223","6703100081","8782829899","4130120418","6011801970","9479034484","4220577187","4962185298","3548947533","1911546649","5954766623","5652257099","9688217237","2789358599","8267274128","7028104377","2114267486","9275424046","1687828924","9472347660","6901402041","9239131840","2189677306","3790301608","9803885199","9993804514","4662067947","7680836819","3455082752","2692056843","1658616868","2859046791","6861788892","1923041071","5999561934","2486243454","4148550958","9440949189","4962339126","1181110461","9238555054","6680555480","4504485782","7392579458","7805268348","8242877107","7728620143","7711877986","6310374605","1913527877","8151468276","4281996273","5389391582","4174935967","7113480266","4448326869","4180539974","5835539483","3308785015","6909932757","1728696217","8149617476","7434231071","2120595947","3698175596","8797719432","2060355973","3217931371","2341075982","2761377781","7012713249","5475336156","7130239345","6721431259","9508498835","6249479014","8543382098","5429953888","6867982145","1678631196","2818495979","6112355404","9930105316","1960300769","9664330062","1748903573","9162367743","6796848231","6871382724","1052363580","5503266431","9281359618","2227821463","5455776692","4743441112","6662960811","6224654132","8924584314","5664633936","6286409284","2434998479","6299763088","3424418633","1742290406","8376906856","6972479469","2547391895","2182431390","7492240988","9669066444","4574124895","7101160955","1125646683","3673913012","8969484562","7614578359","4975028675","2857340852","1817655493","1854128690","6309244945","1551869583","3210473301","7202414799","2413663691","8676088054","6299236284","5945959512","9302723908","8914964959","8045464025","6286701349","7676892530","1299935409","1017756577","9913430481","9793300824","1467004095","7663449130","6671677365","1240828974","1327823494","2048959844","5947854463","8309375585","5622944614","4209092471","6719525465","5452988954","5680252409","9086728538","6909052711","6729265412","3378297678","1936414348","5784086130","4691893403","4025194461","1892848847","3333731005","2059565121","2394691568","2593625623","3934178008","6600748701","8785782076","7016921254","3633941362","4328278874","9016664039","3210371199","2471376141","1189880087","7565025112","7386183545","2199784068","2340998591","6636564985","9443825760","7176979195","5466516752","9079467134","9061084306","6487851926","2163431169","6004246702","4774137768","4600195684","8005366622","2495178728","2838651165","9183333510","9063914766","9792286251","4135642117","4904015406","3638990794","2704533326","2809989931","7046270741","7749902536","1196171307","3452703389","9835280082","2918495607","9445830410","5820210722","8281970485","9735983929","7748308699","6406063818","6945260784","5358134346","2016668847","7168698135","6100405624","9739868507","3735575027","4713348795","4312865821","4600800494","7479785507","2456599486","5192047681","3657620078","2653922637","6437369780","5722917649","9660370369","4879507662","8349890114","2991287936","9292818950","9626891406","1957251738","9641211590","3645805268","9500290325","5432512520","4706343199","4713939686","3018439257","1873378643","9140334226","4216522896","8124112999","5810877704","5643569150","5469917360","3502140901","9322447231","6827322645","3050448447","6828851906","6895123744","7755246028","4521940192","2018977288","8587272230","4309513795","6324760730","4262634885","6369626977","1037562417","7292840860","2973172026","3843757293","4898732409","3080409902","1495481946","5872387777","1657140466","1174500654","4162637484","8508816908","3477559403","5851423816","2591189011","2336064447","2749383123","9539340704","3081429184","9560035054","9020419771","2210141826","4354764754","2502648855","8352422077","1009301695","2427167841","5141836848","9116267959","5257446176","1398239287","5270339905","5251953100","4245535621","6472434691","2530597483","3356431352","8803646858","1585022518","9938659428","5272733113","7401815093","7886123067","9438094799","4956741605","9063210798","7360679495","3917964390","3322573956","6588266512","1391261699","6680520653","9187791077","9986467353","4950841431","4164253488","6885292209","6550265821","4242262753","1928854077","1151343456","9854979867","6650123649","2532798025","1462029721","4712459824","1274829179","1826940157","9161726849","7468456106","4721639373","2034533091","3883881407","4012464906","7809811889","9473365649","8206287665","6267827851","7482715777","7212827535","3219913830","5198899262","5841714408","8142608928","8505601026","6476316919","9630381721","7772178970","3129182488","4355245730","4756212214","3918846870","1972772317","3372033244","6447799042","4118031389","3055327390","2158696106","5001916325","3418720441","7572387238","6743212422","2690046480","6690579038","5698568360","4062765020","5080957748","3271065981","7002479985","6129035207","2029218216","8290278582","8501762722","8090871981","4284174710","5083478527","6092878853","1192298615","6101380953","5038989813","4826230090","9575569595","7039880901","6036906531","6372761421","9914177134","7686419917","6787906791","7741846577","1243227481","9852400024","3441053944","9973535432","3355707097","7889349716","8394726529","7109364413","4244902573","2013951374","8935503814","2641974664","5314529492","5940247717","7851788681","4972366938","6779456074","4498446568","7553947664","9719317556","3052988047","5472424960","6987710276","3690177376","5707482189","6624046136","8850083183","6166293718","7406362469","5240846618","6530983726","6305152123","9778541264","5281845285","7122394145","1712050418","4587444958","7650514001","4835081550","1697155106","4246622404","7214302503","3502029008","4183617972","2982396130","7782752430","4785633747","7522128173","6560813208","5062047424","1770087779","7119618128","4448255534","5097287205","8318497791","1067554930","3862379068","3756270456","5247457178","3792203145","5311873347","5042263578","6796474357","3869479564","4569181888","8125491457","6745566001","8280503245","8134388092","4452244784","9941007213","4189020623","4340283269","9064610198","3961269376","9971098888","2239775287","4789502056","3094720389","1844877782","6180819246","3190329723","1600698072","2042139470","6947805070","5918147498","1482273845","5995813720","3419146236","6877357029","2631150644","8501289829","5812792719","8715909802","5691798000","2854535944","9337645870","4094361393","5464897059","9296809733","7984035885","9993977239","4479782065","3787279941","4868814830","4237452869","3940757880","2566489584","3948163724","3707591671","9955920053","2676198856","3543807740","9977336567","6740017005","2095751358","1406862530","6070861189","5845783336","7282097701","7475010427","5369280472","2593923860","1631575833","2363468505","2326193641","6774773387","5185583982","9667553313","5025435654","7610617213","6353152417","3361872853","4397169492","7037311441","8631719259","7303092536","6970177431","3291315677","1644146636","4723171819","8133362146","9814115336","8947784960","6380714426","3413706681","8241249402","1886900552","1008699481","4642403078","9360010018","3500705358","7483584316","3326614087","4460433787","4357676108","2651601350","8641473786","3488792234","9085020023","2152440122","2154016704","9655710057","7784014956","9014547047","7668065046","4609366572","3215510146","3380491057","7009599148","1537880136","2277005703","4805942933","7750764586","3038747222","7227987277","6795946259","7274897095","6527074190","3243292031","5026477788","8353665551","9241965736","4696760710","2049948334","3616689588","5308931576","7330459343","2121984351","9259556854","1901140010","7331083666","2538573916","1970603544","4815846810","2008762490","9155783834","7620193225","5049920199","8477242710","7296897771","5925304234","5478582192","8493483501","2591046334","9576268164","2845259221","5166234923","4001148780","5417919852","9099624117","1302245371","6313065227","6386500023","5864293105","7070588994","6627377368","1053058771","1805602431","8137967506","5399154397","2803068166","7526302936","9041471040","4820500755","2034675458","8687851359","1337879039","1223084072","6825912093"];


    codes = secretCodes22;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>