<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers




    const secretCodes10 = ["340130477","820470965","789728526","595763414","299054278","705924326","849890761","158393048","169480681","139994664","207080284","309735133","820053247","214053689","783033518","454418877","802298406","583168520","167147280","493841312","135231414","574346803","590543475","160665334","888915509","623849571","808599041","382744321","802213745","936624323","175909800","906649460","914796548","982436935","776600389","473064310","882762607","466575796","106019476","590842903","520050638","690544351","313472663","616525593","233554881","782362186","898540951","196123329","631804410","275887268","995322685","493705661","107424880","490707795","412863082","732589682","857063847","188152418","519721136","522174917","144596736","756899321","134696185","551920804","439157678","599421081","540484349","548680961","769290902","346892142","895182290","812959233","499218804","504174863","335656606","623112146","211077781","737437735","312601036","238468597","669622174","129939833","331859405","725269007","324845929","167270908","130301697","393926681","957219006","524310283","226026352","418325255","787646942","228813085","558603143","372318344","184300143","831937385","292110330","105455797","261026992","598678629","592155481","928847310","911453189","174277880","994960754","343422781","529548327","209241618","911189773","986229674","370227932","181546349","595803070","118778660","625345620","830892164","586291628","799405779","196242754","369194773","438326414","109414970","212014546","107181304","604718491","964106460","656985686","485060838","532112304","912275566","552978796","235353388","805179744","881871967","210527668","652028873","779223564","207599913","137275765","531033755","502264161","831369386","494581358","405865222","261183503","365777409","693470596","526819361","126645339","200768826","661859310","730881375","384143147","779193721","184820446","127716466","878941949","950604815","880151115","134147318","107728773","763681278","211908718","729457834","407466029","910507063","521877001","499902168","857228086","219565509","374375812","748729786","674967854","277119150","916386867","684472842","184775134","717307361","669267053","549837231","752841259","295795618","269438738","411934490","573489332","693743285","866948325","654798660","171860778","922239111","304566386","117998913","667520110","774835490","973419646","472939209","353603604","697677324","156080327","172770071","724991505","445616156","623425289","894305919","921681158","572739576","784160419","122844092","151463965","973541334","508505851","750175539","665473557","770600229","394855472","361785409","598476842","123475503","242166941","474543667","798112751","705524955","372439011","746874557","993679131","234734973","526344168","581311966","787927564","355408328","832434984","357249787","339774358","680290318","508075807","801129710","380095255","525710059","108200702","498742675","203986838","700258236","267880761","751839441","337262611","617140935","512164898","680226007","818214017","955245067","420051470","137779012","218016256","659944435","541349161","708811174","289613414","149845085","746250897","244459361","320891203","162399310","563978184","834176485","263222835","936350414","207344367","685352805","625303349","631759858","395959424","633851843","513397609","100942426","543803806","349618730","611169910","398487162","336298853","207352197","508453965","450833275","172960422","613369541","842313603","279409088","569870465","840725149","879309131","695539235","763407369","681003075","282753683","269193632","472773917","574219825","180749321","751902484","325405426","305651194","611278062","489635036","489774429","559400125","513588341","166437470","644142666","175566939","841561232","805210658","254643606","891011440","116011127","134317167","192030288","833151457","141692265","422203966","594213496","241938747","275104941","105307764","592161003","988111428","105719004","124197551","556803637","820255881","413957274","194259709","268707915","415515219","917896152","983841317","351876899","542595853","795067769","546270834","793929934","821103162","289503125","275118419","255954389","636876563","638444433","192075499","183364237","863878081","347982694","372541394","976843647","673648177","598842054","314746054","379037930","154301213","166187719","637945867","369953969","312797177","221769427","851850835","330968071","202045690","802699637","584777235","108616313","598323533","107141838","501613948","592973902","252182009","811188510","221657382","436264811","591337790","834449934","873692365","900831381","607414825","774705468","815500520","258957564","332201971","173093041","793460379","465583683","966765288","147988246","522540937","576251850","730166369","593971835","487803112","477091103","687287100","550084367","962087794","565751757","922280404","497984694","150104348","673645611","665097573","796191284","894307294","261454410","123211133","373094911","389714807","452836822","658667296","351370798","539659813","392131696","728051860","885867714","877221961","970939748","829774955","708090888","135350118","352861470","736993043","200086188","248660507","769747541","268969432","675766349","203306403","307871455","154759529","162499670","162709940","317841592","592261888","652230017","184711008","314836844","218531778","304809411","905893941","235545118","133495146","680201501","367760314","995968404","130073534","726324170","112219096","607291333","596990955","889262694","865472507","584834243","288995579","501350373","264042912","300137953","210990809","928353152","894938683","706359632","120402429","361247931","316971162","646299498","438024007","583703643","723260442","479418036","550516310","962783324","912353001","175671664","543158174","896067260","928243958","776088152","978509150","238288996","341545443","798920551","745231335","925174010","527094402","273599698","998320541","929960407","561155442","570992103","693507486","587810921","529950263","228081888","612405851","575065294","625510182","217049810","967794792","138582349","651284865","556732649","417513068","358039493","464716589","967015534","787901669","464234281","246823228","317026010","253954065","593403321","652296929","567353607","757644948","269476623","305970430","208335089","129563738","957012270","779341337","409726204","842527600","399451453","707409343","402244193","111095956","870789610","933086425","600648955","527674093","675117101","982140405","649858080","276613187","343911372","883009567","412460807","104193917","816186713","356612495","878705812","255557348","884953316","499258288","732862643","467589164","185526858","362180962","283656694","467544797","565829245","666681733","989470384","893634041","507868784","171455448","782260169","768199644","197743386","927481312","753331048","291016005","766889388","311127958","148655650","811472478","760606957","665225923","922404840","617442528","639868975","788179593","632127562","952306718","114112304","427238926","361810861","621333106","825813860","475224624","922231991","245018597","290079610","801910641","546773421","574676724","160182053","897256839","791072344","902427614","626037162","772337463","521436300","988531218","796673794","766698945","646113302","904472965","550329934","966223769","795336105","734749683","507316320","322802260","502718181","375919670","307480188","520559926","666608075","576280324","118105813","582536239","709575321","806029732","186328605","255702030","824319748","310456969","251681620","309269342","218126372","843596686","621781175","421225493","865154323","947694364","576715877","619632999","840603016","853609284","717145853","897286565","926808412","826365025","800232801","536734137","479143518","990350372","451987098","180248325","544098616","261154371","437350162","259094674","861387089","775674387","150474191","485771149","538290144","932856509","416103986","877098842","988751569","929996336","830626125","254412070","807059447","470804056","263766444","449249338","507025098","635573492","803909093","281470781","919544696","470963083","222252414","365003856","247196134","757288586","665389108","401611782","332975002","700765694","509616542","281355358","999150558","244723253","656182398","263855788","584242027","120658580","752029693","229279450","985041203","540365548","266840595","350794499","162658547","442390799","204747493","818679621","220858238","383497261","772840203","910064913","350290771","441896109","283612044","140306813","979446953","539275439","903594419","193957563","285305352","451618067","671316715","727094042","333339144","679072020","479793321","202216018","476268928","269516150","485294435","585110806","258876199","325556086","490196356","713381499","856887085","943141877","798924485","337426798","981240429","434742223","268209932","984501673","899446481","730261281","330619596","394253129","948979757","591258700","664117964","805427533","675126393","388250667","781880618","808037715","867982170","908841356","632290537","260587042","737051491","238487262","888376264","727971535","471334120","654394207","135294708","926638065","980967250","523965015","859930187","964050319","602962111","478992774","211846736","890092618","754126462","643936494","474704491","779903555","838864559","450012080","895343223","472890612","659623430","905875433","898114719","482687420","863491617","203792032","937300663","541203935","951396673","743360040","604194150","618446446","627826952","865888321","167119319","744035549","160702631","178764934","262337341","452442610","779752298","786704573","146052190","315985524","430574515","202247521","846084671","370238942","175892668","424316420","661257878","413228941","427137443","901728873","691407035","720275439","688708748","482637679","741905670","222512299","106352942","486093989","270999622","671812057","411932922","798296610","680065577","884394479","457961893","826613352","621706551","158216526","335828956","486733884","912874339","760513798","361067931","267115469","101249620","404855056","520524317","960370929","530642184","365039075","967873225","555079962","721701683","263509235","433321615","351139704","122166454","526279087","977170643","999662231","940223259","883438753","627018576","895046689","777385503","320991698","867903445","897161507","931472087","831370073","520549170","531103637","890893269","690351072","803277589","304410541","865037843","228823229","398399806","355108557","820823452","912686193","546656490","269457281","679501656","587349170","281091017","554928541","558150230","775034699","550732661","376501797","935387241","629733542","989865979","296632042","997870163","467150237","143733108","375974749","817392133","569905707","684058288","275081824","122654069","155410464","675838425","722094894","941132144","776590576","754848294","766875087","865239846","689349617","101578853","983494082","757824711","294988798","395812440","917898352","159262603","442999335","632634919","553028091","337181638","813027311","175224102","375393102","996310531","879184786","753606643","446348882","642234996","634861603","843746009","917902797","158774616","772264658","860229082","722462400","843282335","209497153","656451742","446080628","914195525","656880039","881728449","805926006","903764760","888663389","493591266","977245286","933821077","681147215","776818012","702117940","166393596","976609464","512358372","194488904","879666835","552175577","125144069","869647188","305795782","102274801","123317775","774516722","524020330","901787943","672430578","849014121","390239548","408787714","477795091","514443713","922625928","195953870","484079255","117967781","459067988","662043800","306086542","164956923","924139856","328166721","950743614","676598304","594143259","307556898","330171167","312738456","232707790","893575344","336068300","609406195","486819592","345089216","691104768","480229408","597701407","960358201","693794437","956635052","651519250","925453460","158829562","466813824","993133284","168738086","560559458","308560381","577806778","650326340"];

    codes = secretCodes10;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>