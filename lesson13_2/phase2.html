<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers


const secretCodes24 = ["4387933850","6762321729","1232987175","8397430871","8966788558","7375148914","9072390057","2921637142","7848157233","6125456640","7819061003","1320045506","9480395451","2604602483","2017728219","8040653381","7588295818","8810370317","6996072334","6506652257","3063833652","3876906678","6817609860","5790781218","5021490948","4249811901","9500400121","8673330246","1810083688","8613659248","7843667928","8183786626","5928149692","5402924018","1420066960","9271200319","3652663826","2352421546","9425811090","9162550056","3250745141","5059618876","8549862392","8862352081","6672748986","6779304370","5144228951","7761504777","2201804450","8534396881","2308567650","5616556709","6490192565","8525088086","7319359434","3117220775","2144993983","7208976067","9951518083","3694521508","2839811796","9461404540","2486021146","4966877487","3381501299","2878597874","8910481157","7795742346","7496642415","1518399747","2731980401","3172040474","1420310012","7389889419","9587444770","7108186124","2364362448","1371770980","1230065259","2322469493","7699379009","3686543138","5313888342","1087054398","7845203751","4217270732","2167316350","9016308986","2499683082","6084701054","3503660619","3317616230","3523256651","6303923044","9940117128","7297707827","7388733388","6086838876","1169261254","6501400166","1354438041","9080776122","3336844815","8026127771","9948340253","8638905220","3774196410","1498561129","3536256259","5125485670","8722053373","5704366760","1918470759","9532265382","4079304364","3207415049","6869318960","5223734577","9683052456","1190150296","7515367374","2517231617","8994258451","4282292117","5854584924","3234193040","4077350022","3115792688","6253599038","7288340039","2311916510","4909489666","1458114890","5260369682","1537363920","8909492792","8384451801","9145404031","4048752614","1802474427","4330177743","8811663658","9052603802","9679272306","9922868190","7618953663","1717115188","8308175882","5709814583","2216558033","2657057372","9371576597","9415745636","4412779809","1546205936","5155879581","5396167268","6626866613","9444969079","2010415008","3872366730","7680334008","1339907098","4962090749","4955254037","1552549999","8194025594","7717700864","2760694501","5302138752","9765967915","4262953740","5012715750","5376636264","8445878656","6089276372","1460337204","3785199964","5591534071","6740597508","4556215440","8807962269","3325934261","7798513323","5402620271","2290218901","4512146445","4911117067","4690366096","4365152350","7715726399","8273184596","4060266220","4348697948","4730255765","6248797379","5507110342","3377903666","7029999488","6073832195","2724893185","4533609167","4357612558","4282163019","9387644792","8085828282","6913604636","8123201829","3137755974","4896234749","3218033720","9229568605","5366535794","1846855190","6877084022","3241402035","9330173049","5369312751","2779779755","3622201320","6404260354","4684767511","8388665993","3903144297","6191664771","2792235614","1213452629","7186213614","7118391736","7672128267","5434717098","4244251204","3178941529","6858712397","1607625245","2077157661","3767833035","5086183548","2645311140","1416362500","9367885123","1840492674","2412510576","6099860877","1591285252","6015779408","5673166917","3248577919","8400670661","4767100873","3452113620","8930819663","9483624250","5391926149","7262921148","6669849950","6897128915","3707053095","8006665788","1165533966","2941249589","2469928064","6365386851","7101902615","2619097639","7646746328","8912333776","2394715818","8742574964","6704032986","1586796896","9101065301","1325943292","1114989938","8236441547","1336534617","8485065485","7354158514","1644392319","9400607060","2797853609","8252139273","1046105647","8178808728","6749484428","9549351160","6817475160","2102582724","5080035281","6731584813","5456336439","6445119931","3686919004","4860298468","6799836170","4980131544","3885971606","7926113346","2296228793","3787988100","8344069237","8385670260","6529266147","9774206097","2956950528","5942621713","5600834132","7425936160","3955097383","8618281144","4734037640","2124331626","7068254400","6433273526","1294318406","1509214160","9390883261","8368880631","2605042229","1356888116","8656753559","8576457029","1658699480","2185974916","5683703181","9883558427","6101151082","9551124740","9262544875","8425493211","8930875204","3740110575","4296557463","7504169210","3908814897","1793186945","7575341554","1433203874","4119892708","3292097825","9902239779","7128967790","9161422980","3102766594","4201398746","9285792121","6089772047","8012763769","3631629926","7558165726","8191384322","1999366119","4296732129","8558719387","4278831864","5528130689","5779126512","3083615656","5621415372","1398911710","2052091901","7889297921","8377502638","9065718110","9942697124","6302622644","3393647837","8932354895","7059151955","6083618879","7279263334","3184250869","2207034683","5505915091","7508728548","5528864094","8596047806","6708971807","9330337355","1627248370","3586057181","2264592613","9381583387","2243678614","7846359825","9706314601","3798394226","2365145278","4743446302","8588972993","1483036598","7003132326","2603842130","9450220211","8078159813","7261097964","6785214660","8649837610","8492233433","8285902355","1564148317","6576149112","5335836359","7061435933","3285087067","6707068615","9548781793","3281017903","7120557736","6131999707","1944518137","7510216442","9853743228","6247416205","5622807008","8316038335","1811010967","8185321674","7777852313","1222976512","1067613245","3403716058","2770141325","2492850124","6052269672","9597636076","7739057828","4370656452","9042201001","5244023046","9205050209","1222840359","7504382445","2838275842","6838082232","5238830647","4823253443","2982590196","9988856250","9544278698","8902759741","6464231794","1726319666","4248134655","8565080646","4649147917","6503731818","7609282851","9182320575","4412754617","5702944724","6012747514","6188129742","9543244798","5004919681","2106527055","6498506750","2788800151","1543593543","5454954006","5792031902","7761717607","3526071089","1620232823","3132878355","1185272119","7087571197","5610722009","4462648043","2999731369","7216886429","3820928381","1810550513","7959836661","1193161083","8168931486","6540055241","9033994834","9835267390","4601826830","2729300381","4029811601","5665292296","8349810274","8375171329","6973984415","2223726029","3489832893","1311952200","4214076516","5897986910","8032664997","2216375505","8335778303","8064946613","5414119722","4075945272","9868320809","5098808841","7476695240","5466379609","6031530264","2429525135","6785671244","3348725898","9214236688","4291111971","5334836088","5726925587","3613343403","1182597603","5494889911","4914431792","1524843261","6650558206","1909950244","3469929848","3600178735","3550382949","9311514302","3812970513","5171062738","1420642978","9386754224","5619250526","9714642018","8374841684","6754344247","9600382537","4812516296","6003322990","2871442092","6825046783","8981409788","5653234590","7128401934","7984358720","7740403606","5616955634","4980668237","9327455734","3924609833","9002173427","2005481489","5475472397","5422330676","1646795288","5468890986","5594359117","3048233395","3186885529","3209324855","7945836673","6113863417","9761300189","3204450172","4944671333","3687461074","7708855567","3439826678","6697901529","2575831904","4748980394","3296028050","1518709937","8650880709","4071246005","7567094236","2007935267","1484323025","2374260512","2637026662","5561407289","2428356166","7226112921","9256693160","2940737754","6746709230","8524986795","6513934161","1601963426","4370604949","3313567370","4462117055","8111360908","5750797114","5407388978","1302824611","2692108162","3403266474","4374114358","9290250393","6656829625","3353910822","9530304858","4891172531","6998706731","2183222491","9197588105","4032900530","3409741083","9098803189","6722329043","5274946142","7300820776","6742990453","7949724756","4197027414","3780968258","7926329208","5619271764","6995355116","2889688428","5669146008","2929049098","1534466205","9701447080","6201688182","2774119412","7026057657","3419960338","6025740112","6509288483","4331156911","8352620431","8587540203","7533784706","1848416515","4973894441","1598795963","4347563990","5121707458","5648524970","3615117404","9604911198","2241064714","8909061038","4681607885","2073827036","9699241922","3554957546","7892482567","5850163568","3071762608","7119923643","8043159813","5320072799","4010065940","7396856326","9654282632","4305227472","4719956916","3282072523","8545818324","6096059898","4281478784","8063911967","5593412463","9712010046","6242987280","2207522732","6498481002","2170531622","6365267516","4748188885","3532769427","1932345621","9507453955","6213402787","6155956691","9121763204","6240459033","2414672792","6205553002","8115093053","5060870411","9526346180","6876671647","6377382064","3859107319","9104594683","6232108258","3133521737","9377230955","3606551334","6569976736","3190876505","7861756389","4327386594","8844498899","2643843402","1031154941","2145053014","6565296045","8719616567","9569787305","6543193767","4298812229","5672556958","9573520862","6611896975","4555066718","7856094920","1522860589","4089953311","1801511546","7070997793","8126773820","4668871380","5719631669","1927158817","7953065626","2832843393","4517692256","2683280189","7534973935","6357169684","5576687566","3698478507","2853022902","5232402951","2850667272","3081911921","5781572192","6859856664","2083309376","5829488245","3543379132","5860960119","5493854942","1074021511","5501751762","9894272078","1933117467","3595243993","1888994384","8067317138","9020691579","7330683067","5284078307","4935543551","7311256198","7523817220","7160010700","8390231852","2112053917","2616534507","5018416019","7569858122","1843916379","9474455541","5639207989","2269922415","6765345363","7248535153","1119733167","4266109253","4690887378","6087016209","7169675790","6063763533","4739938523","5921049377","7352003492","8787425149","2312354135","3763063666","1260524015","9096416137","6481910939","4931171415","1919071405","4847680725","4983773510","8945499364","4775694984","9949491847","9467888091","5036681978","7368998611","3745669788","1799109426","3577429735","3287766176","3706235367","3180103985","2909095892","3944802569","8403475036","5059555656","9795574552","7974142945","1928106471","9589243924","3108320090","5899344639","2462455625","9898251827","3138256337","3254460156","3390435737","3579462091","2649633458","6360187553","6678423500","7288494011","4797227542","8149675720","9674532806","5658148867","9733755641","1532556599","3597726812","9800490772","9501216907","8235171031","4006523231","6276257657","8981789589","3242254747","1395479276","5177971534","1841216713","9299100265","4654458698","9172913057","8642560993","3243370852","4449409467","6523975063","4518616137","3261409979","1315366875","6188032496","5030604228","9958389813","6915267203","3120642304","9077422058","8486170005","5804073475","1171721962","8982303078","5666971422","9803390711","3045363666","2195234973","6956359135","4016971427","6054138737","7351613625","5380438981","6073643677","7377256807","7424564329","5938736516","4113601557","8062845450","8556624786","8749396411","2500809632","8804003411","8009476592","7561693525","9252970257","2463223572","8451149335","1497794552","9742665343","3842771609","2640960587","5904239169","6075278690","9995880851","8600696412","7814215886","5257697575","2032034734","1553451132","7666529811","1265294533","5811240214","1945327807","8075151845","8325308850","1148320950","2424525597","7654489779","6180845236","4648138235","5756486574","8008936837","7713305714","5842469575","1099569715","6658435432","7920777535","5127616851","1464661572","4812738199","3246630147","6382953013","1628445263","1835585530","5068894166","6210659177","2131864652","3694809570","9598651597","9854220348","9811354671","7354958086","5541167963","3294513901","9463880653","6408922006","6072928560","6953662448","2633221739","5146540684","9220549297","2011122969","4787758973","8828997784","5414700525","7941783816","1284109516","5114668096","7658294529","3564485066","1704682617","9493164759","8877983353","5098470761","8503776379","6224203681","3855601200","7841858436","9039119182","2241204204","8082315998","6875695861","4837290134","6700533049","9228520086","2732386259","9434103073","2891965728","9113596750","8035011109","1853223931","6390193802","1445443544","9301672487","2356163373","9351855124","8781774170","1721412184","7888990003","1884388640","6850812002","1554056906","1182634232","1268482746","8113059363","5316287899","9309411089","6034749144","8713257205","2225495556","4740701852","6541120051","4444895749","6986923748","8348414850","2878067773","1497041059","9680786937","6907837524","1241823737","4548156835","5793573338","7132739892","7472830189","1122833756","2260375159","8423096132","4483723830","8641346838","6589847079","4227619030","4878610350","9057173730","8889276738","5826172205","8197322359","9612512821","5443772113","6269605624","6103529882"];



    codes = secretCodes24;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>