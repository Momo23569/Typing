<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers

    const secretCodes16 = ["686637675","288946776","694954729","201493951","392815771","472162943","875565135","289721617","533727693","603445347","547919650","100411249","126299826","295221944","195198709","236907556","902952066","178303493","667798355","717118767","125102856","692558742","711136124","336569068","497433596","294965049","353653924","528638985","569228617","373919790","303119132","588247019","190804559","845914667","507457952","140890842","232967249","331109727","891828146","386917227","149804118","479135421","504796047","501896760","544403655","894254862","497357462","198523419","498532462","392986867","975390311","733881548","458063893","561650585","617714641","686464080","877865881","327626546","779778550","746981818","941076549","618077890","170084455","830315057","475724482","737425331","462463765","920553854","547133983","554270508","805857188","606179728","659819136","308417067","284856989","213664435","733804034","157926110","118268752","215234735","285242086","263257925","654697644","853542283","571692739","814868108","599506997","568754213","146901833","131805886","621938790","420065375","216350237","245902156","284112900","720658722","496125883","499279643","776016087","945773327","371280501","754672399","258086468","432427375","797846553","873657688","952683049","443821622","770970228","913803897","769932903","701202945","472278874","114285573","813408528","451942966","279365826","679722327","424882775","697917322","332583928","372634752","339377500","220685830","257186614","355468785","700453550","344886832","279009780","586431427","773183162","850380011","397400406","744486798","832437358","924942835","403410240","836041129","296917014","905083882","161055818","492906943","782855702","680140541","396690315","482426742","997589971","576926709","728264615","634168818","444726415","457941878","311322661","885655873","134044823","838554218","282617439","303629198","142256473","638101738","455263309","662722269","155589855","360167617","419406822","258531092","500132088","917024455","598379853","957034051","949056462","465646789","658690463","535618635","917473932","953894481","684194871","330531227","135611401","893277198","420896872","532178998","933451523","466340821","907254901","243812388","441733892","401311207","726791890","784354740","217467418","595510457","834870541","176430730","942683651","787310150","464985569","920360889","803645507","360412326","176704520","349192161","947006567","579530903","332477128","162522197","665388783","782615120","984120189","921086959","343517744","901772143","810615019","207361074","867979022","780507508","405412511","226572835","796250277","228230634","285505901","358818333","494448837","424543090","567221411","317818611","444492384","148351958","457413127","627365603","537514535","836466442","688093310","232286328","129294839","512368673","237436948","964145827","788971957","642724884","211394547","114472301","707386497","357784202","479625401","850937906","720266532","251823851","887308555","339409314","147844492","687188005","229878079","626129300","353951889","752826774","434110898","802557954","160247162","302018149","859048395","334884609","470273236","897030548","784325402","992835545","358118133","132884138","936185949","940552631","380384900","741167565","453657705","881457982","471524081","324714999","457155074","129519683","408244899","745553143","645112694","518396232","883668717","993656384","668108622","698550495","324575628","585065471","502151292","534319698","379978446","327266505","973675205","472772947","319368447","314063643","784043860","606764373","387232306","535993994","676105423","408912361","117527726","693629581","426606810","182397049","300005269","724217832","270955716","873616163","449535846","599323583","153497962","314667722","266053286","828571549","317995633","943155122","817425241","816274888","284950731","133846358","902224951","143662715","708346667","751658717","127109165","327500538","381922060","454918974","169360382","856262648","244779458","425055932","965419777","222028470","210724168","535375724","465862459","727194018","325144676","359142510","182362259","365608450","129080583","954364668","581901828","983477737","752031402","237898040","519399808","455416117","786506647","438090528","121951683","802523983","829113073","363315550","636170163","975969278","830686238","124955615","555866860","872117273","223629845","935069313","483305631","498451031","444395262","812533015","897577774","784357254","328135226","425181321","889339831","368958509","655622232","661483785","896529622","324414938","421582604","307013793","586591979","126792644","757875333","865297891","364906544","591155893","653480628","694638009","737179394","413109008","542301410","129321189","165777433","807318566","469433973","433980652","622135010","696790817","569352088","182108301","396685810","876609842","425478698","956196161","693413536","183262727","244990507","432093123","343208604","132383138","762332942","187875482","764118182","542804234","344678593","535000505","946142829","273647922","605269338","369025367","240051980","497613996","983046910","966086549","502992638","823111669","865505447","515828341","127598578","736891459","937722069","109535566","225299647","656772364","425727065","483238155","199913000","441397487","580894781","927752278","758732351","183391537","220143756","941514833","526065499","858911433","990400825","394908847","730923017","943748977","603407183","261731895","627095369","817564227","612764817","330266703","538894056","990567547","622184732","950844420","661272320","287637844","518101648","638226916","936286236","541145327","555738982","426740265","529192924","686104995","781845295","873841272","979904633","138934630","911280002","855519681","830095958","978061574","931502587","909299280","262995265","425375687","309648706","141835645","201446489","180086066","695939298","542966566","918212514","655779535","469932506","927692608","926560716","429176222","878840551","677179064","541402077","978210781","237940417","820288094","368397588","691472315","355690750","369561901","286924945","273602776","996872454","650739682","143017214","684259045","584943051","441718894","165848986","102180471","208715286","370835833","513045847","989668672","347407817","423627363","891256025","470426143","933922238","603631169","409739817","253333292","238407954","247054431","967079964","459367267","764954536","578563507","191620635","257367422","414101708","490680048","237393101","518396359","680777828","447997417","239843346","230254300","254329364","402378599","669508631","908524229","929118430","166338697","116796486","164455134","270945120","719971800","422514134","350617883","823036985","941732670","627600892","219072529","810008972","354332165","813297589","166916219","771303592","167303295","985957209","852996384","966319402","287101572","799286990","525021758","929852741","117192933","209009853","762958476","363726441","787195240","872173680","484660623","185739188","366197252","616039658","865671012","950183333","889112976","472409018","206709013","913137534","468470146","335646734","698946352","320572497","832244408","807445818","156251838","111419423","551667812","360601996","705997670","625733485","988594318","847222936","304218450","562208389","134717626","996578892","917184603","376625027","145234754","859771388","427724325","758774512","772770087","319679354","669917803","326862695","311573736","948478675","928629458","260521631","469859068","133810104","567133518","767105813","572658769","420020636","342612224","302309678","172488306","422252279","907610244","976481757","640030933","662065192","904128302","874973251","588574696","274607951","342387855","767649147","252184410","205240555","658501200","179768158","376739356","815221912","836766948","987275572","730230827","638177161","591248375","784267976","516465312","568267795","283533223","484402033","232554358","583198953","516453460","501383736","497573698","661036346","621752994","433921120","908288771","157714948","472127566","704931139","419718640","623930274","352408480","720697510","956358791","691706124","308647969","989967940","165527524","444803725","909130645","463795764","433810072","831796473","966843076","686757865","123478146","273824958","542861975","880992380","761768750","208958242","208555691","391907201","467719956","925313289","106572444","439076102","934764699","306469541","658987687","930808964","657919626","578269646","589619553","865713896","522283373","788239794","714347836","676907674","130048358","688422595","969132877","485376743","358984684","393554331","424264888","367635019","386804776","965250321","262728264","635620625","987960090","269034248","574794289","568975943","735584534","650275383","216575310","432555685","298047948","423097705","113340916","215993251","301313271","171107578","918336467","168984320","370790040","115755493","805225563","837984750","142535678","461807945","702290916","764055314","383108958","291159801","929272110","349756021","173720014","315980249","260742241","608721883","560184576","782864771","742147036","961941048","170580950","731631721","260702323","444990176","811300802","287129434","423239986","339482459","900329795","129750555","595909843","313031294","671843813","494603908","403332898","165475672","997802033","655484503","819731004","987099883","818573211","724607998","118568939","319630752","273569550","621958859","695374823","333281767","668503201","222928037","927599492","690241183","313029753","733440478","861358874","485598203","440026622","544040867","147105364","550307686","459618786","618505041","889015697","917586551","424179817","529227485","513041318","370452004","457442884","343488007","582602829","196129662","573002250","241955643","907470748","276839859","379093959","203479016","478686810","835285616","855834819","223779855","574433279","563811491","987480811","647505781","430407819","758127216","740959157","645955100","597482820","867314301","355107457","609658847","718185073","767766838","685565723","780871029","354325737","771170637","968319653","458272304","215361508","597116865","121021496","324754104","547263871","153335030","979713209","505144149","957987695","723319800","490007313","593076908","138209295","560346624","116017303","523865225","651797319","378849328","886426597","702304336","298480599","928993530","950025813","833370550","979136089","245469308","895538628","534703812","939217513","192042608","448283657","620395701","417477963","591942036","762178022","176388408","837500661","683502625","522148419","576332464","221926235","911459926","884131143","831481240","965957497","991064353","708964399","645807123","301119223","880192998","666334889","712586883","592767226","324992703","112559568","807426972","907535748","199155925","636624292","370324302","156197353","796064299","385960100","719207883","482896107","263423698","793938513","772458839","930196236","346161854","860884465","132725559","848958832","887823932","911983654","618710000","744163004","841502413","760489458","841086634","473327793","462616706","772664404","659298549","384838224","895494375","718385077","851858694","373549821","540854333","221975182","957581170","381272380","351840021","413435898","783873648","237790023","906397417","778735228","281275891","163411860","762667634","346662339","225603196","870887674","756930234","957843393","339715113","171776936","699799118","652751222","679316784","177253160","855082336","462372775","677416442","767105907","295598202","108129102","692897705","127887995","133654330","700560721","436508238","561274398","207045354","280841041","856958900","915046901","752561313","842088901","408347425","982845544","675411668","328905712","582604237","726579084","118893092","272433942","370706797","110419119","983681770","144367744","264181815","701908839","943503380","502230084","194624311","390196949","141835969","972541258","422201245","680429511","139549379","238071604","140879936","175429177","782223513","609993159","882988533","639629797"];




    codes = secretCodes16;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>