<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 1)</title>
  <style>
    /*
      We'll use a full-height flex layout to center everything
      both vertically and horizontally.
    */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: Arial, sans-serif;
      background-color: #f5f5f7; /* Light background color */
    }

    body {
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /*
      A container to hold the game area, centered, with some padding,
      a white background, and a subtle box-shadow.
    */
    #game-container {
      background: #fff;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 600px;
      text-align: center;
    }

    h1 {
      margin-bottom: 1rem;
      font-weight: normal;
      letter-spacing: 1px;
    }

    .word-display {
      font-size: 1.6rem;
      font-weight: bold;
      margin: 1.5rem 0 1rem;
      color: #333;
    }

    #user-input {
      width: 80%;
      font-size: 1.1rem;
      padding: 0.6rem;
      text-align: center;
      border: 1px solid #ccc;
      border-radius: 6px;
      outline: none;
      transition: border-color 0.2s;
    }
    #user-input:focus {
      border-color: #0084ff;
    }

    #start-button {
      font-size: 1rem;
      padding: 0.6rem 1.2rem;
      margin: 1rem 0;
      cursor: pointer;
      background: #0084ff;
      color: #fff;
      border: none;
      border-radius: 6px;
      transition: background 0.2s;
    }
    #start-button:hover {
      background: #0072db;
    }

    #feedback {
      margin: 1rem 0;
      min-height: 24px;
      font-size: 1.1rem;
    }
    #feedback.correct {
      color: #28a745;
    }
    #feedback.wrong {
      color: #dc3545;
    }

    /* Optional styling for the countdown timer */
    #timer {
      font-weight: bold;
      margin-top: 0.5rem;
      font-size: 1.2rem;
      color: #555;
    }
  </style>
</head>
<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 1)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current word (Korean + English hint) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // This example has multiple possible English answers for each Korean word.
    const vocabList = [
  {
    korean: "가운데",
    english: ["the middle", "the center"]
  },
  {
    korean: "건너편",
    english: ["the other side"]
  },
  {
    korean: "경복궁",
    english: ["Gyungbok Palace"]
  },
  {
    korean: "광화문",
    english: ["Gwanghwamun"]
  },
  {
    korean: "교회",
    english: ["church"]
  },
  {
    korean: "꽃집",
    english: ["flower shop"]
  },
  {
    korean: "동네",
    english: ["neighborhood"]
  },
  {
    korean: "서울",
    english: ["Seoul"]
  },
  {
    korean: "슈퍼",
    english: ["supermarket"]
  },
  {
    korean: "약국",
    english: ["pharmacy", "drugstore"]
  },
  {
    korean: "지도",
    english: ["map"]
  },
  {
    korean: "쪽",
    english: ["side", "direction"]
  },
  {
    korean: "초등학교",
    english: ["elementary school"]
  },
  {
    korean: "여기",
    english: ["here"]
  },
  {
    korean: "거기",
    english: ["there"]
  },
  {
    korean: "저기",
    english: ["over there"]
  },
  {
    korean: "내리다",
    english: ["to get off"]
  },
  {
    korean: "타다",
    english: ["to get in/on", "ride"]
  },
  {
    korean: "깨끗하다",
    english: ["to be clean"]
  },
  {
    korean: "따뜻하다",
    english: ["to be warm"]
  },
  {
    korean: "조용하다",
    english: ["to be quiet"]
  },
  {
    korean: "여러",
    english: ["many", "several"]
  }
];


    // 2) Define 10 five-digit numbers
   
    const secretCodes1 = ["87942502","62635884","11947529","93306487","34281792","55018985","86553110","63281850","58250142","28253650","32688753","81413168","69693024","46262421","34745760","76109111","58173053","38384013","75674042","43033625","30362740","50890477","23450049","63419632","57600596","17600020","86227575","71607160","30107910","82193187","43794080","72029679","54701089","37692103","73400219","48566719","28248659","29966403","17674226","54060121","79597735","39348606","14317876","61927490","46246394","30867853","62070844","90031898","18101981","12353037","35575470","63121941","60228514","79497425","63554829","61610523","82213417","34772654","38575797","90822198","48972716","84568349","41877590","56712532","55044788","10217961","51950984","62511322","44316246","30089912","43299689","98135486","26413364","87276993","38725705","99240870","57906608","84008240","50247700","79295850","30511317","57803123","75352291","57786622","73230500","71307940","83027513","32508860","12580113","23824657","48237933","23719507","18932461","24911796","41666860","14477206","37513582","81801821","28992317","49546508","22656624","15105924","23042981","34909938","87098078","42869864","36847428","12303557","67576953","17645655","16714946","98588381","18218837","59138837","37172743","66843141","88990587","55631480","14231822","60627737","42370338","55144971","55911344","10616435","22104894","10595739","94123273","37689923","21491695","89085707","43394220","44035588","49105139","20451227","66146634","13346807","58316591","77775687","46314663","67511715","90868150","76229689","47559608","53094092","13446698","62943692","60629515","34975940","98593305","82391499","87027437","21815088","67798793","64615096","62800434","33339524","51152777","17961179","71107306","90280302","22124050","68104052","83217509","12051508","91643613","60234521","34438263","21952547","19835324","25017525","31005877","44488944","28282744","46616024","86361569","26504350","66360883","30824165","46683617","43370343","12639133","70579813","49617971","52622900","71386089","43429061","75322421","92334838","67436284","98233833","49945001","26086855","90069058","58598209","63727603","35485848","14666093","84116960","36198176","66706227"]
    codes = secretCodes1;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we’re on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds)
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // in ms (adjust the multiplier as needed)
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the current Korean–English pair
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly, so end the game immediately
        endGameEarly(); 
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show Korean + English hint
      targetWordElem.textContent = `${currentPair.korean} (${currentPair.english})`;

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user’s input
    function checkInput() {
      // If we've already done all words, ignore
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      if (userTyped === currentPair.korean) {
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        // Short delay to show feedback, then next word
        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);

      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // This runs if user typed all words BEFORE the timer ends
    function endGameEarly() {
      // Clear the timer and countdown
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Disable input
      userInputElem.disabled = true;
      startButton.disabled = false;

      // Pick a random code
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      // Show success message in English
      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // This runs when the total time is up
    function endGame() {
      // Stop the countdown
      clearInterval(countdownId);

      // Disable input
      userInputElem.disabled = true;
      startButton.disabled = false;

      // Check if user completed all words in time
      if (currentIndex >= vocabList.length) {
        // All words completed before or exactly at time limit

        // Pick a random code
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // User did not complete all words in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    // Listen for Enter key in the input
    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>
</html>
