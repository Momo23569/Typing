<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers




    const secretCodes12 = ["662861631","697299797","111119604","686457068","385079343","109219288","364536672","363292271","588988675","344967919","727181103","591701734","185323973","267206392","173213261","918486906","142444594","347510708","926831345","198134030","917671405","396830766","814338160","484892975","924980295","627424160","284624324","921210826","614052616","915773850","396713594","527719876","601484509","380782139","835147284","462365832","359813145","460121876","611050081","200919134","283586571","897777358","150294538","409035892","570539898","686809960","562367836","642227451","964625489","899887741","510152975","145056756","556779802","556068825","221911167","591493392","488296636","412908939","888121398","984457830","382312081","741358596","738979700","495887435","294562137","997645509","485706749","972209837","317795153","251397644","381088512","241787804","369476240","704020781","929063990","598426139","478129624","219629143","570670697","439460430","371912656","308461303","220263818","904143744","467633177","132807414","943629344","247112412","465791636","485655870","100279369","905012471","728921526","936847794","952217712","846007550","255385820","535732443","316382239","630390762","351168607","578023055","858074234","909092824","319548910","585768627","347760357","378237947","548430897","171132391","560134901","995655470","917463380","331119877","451786592","750463547","878972631","135087346","607793837","111263504","607917515","173426022","622203563","575341265","876638195","523954953","271312609","808312857","423734936","229143018","933770886","830750169","400718858","759657638","787648157","220465864","139880706","620509946","138889624","744500833","960941935","906674337","128592964","870511148","781131985","577958803","327219980","325980864","790869324","805177869","168026248","357055902","523890353","509406009","495930066","127346248","759369907","158659130","840943880","486173883","391081927","322302487","363512513","804499139","102714694","998988658","841742889","839042544","924120332","703137253","354294353","592831863","538309824","255523325","264503564","967818534","922765364","317775114","545054482","919392705","936116814","499414653","582389047","765378628","718417153","223991221","219509945","772931815","300553682","405774593","751695953","158889481","589352700","167167311","578756987","736099551","469962535","220329790","888257045","848425142","373609614","838472391","626967461","586391087","987013430","816152277","882944607","937896085","204925189","816843830","580809601","932026751","609036486","552683163","413364216","240989029","622359028","138823752","808126894","322237810","463164028","111598866","727991940","759561182","309752683","511536271","581861430","846395126","639532065","729049281","190981265","222504425","536181179","682049700","961361821","351614811","883671968","578744838","365898339","710721288","562610708","337142427","268484427","893701417","858729789","428042580","230558330","243629831","454467576","824199973","590548129","241715046","952426735","898899911","433090011","206905428","194532694","330245442","337518751","752632332","558314670","652680133","324375096","300957674","177764057","708966690","366497813","596894942","735122137","615043070","863915652","657752243","156127235","244674398","202827026","736133437","679663642","824982506","363227768","863914950","188365956","796061271","983795775","548166784","130215652","542232074","507792006","257730462","460909286","648260236","288416866","702416626","220693846","394498938","715443472","441352213","898291809","750758456","734866446","497776518","110706272","666567612","622230831","171998038","330391607","199797734","444847246","283741539","995430254","592802071","274295097","560356189","254659883","455587706","733004202","545786335","935535303","914980920","142881046","746905162","178803541","815520177","915576779","951965324","699622518","808617368","345744290","384611435","703430827","493796356","450358303","953660998","995226881","566888254","279830759","718477142","329124573","222408794","541820599","348889850","266145090","484620902","275963074","524869725","882872910","870183357","203953943","711693869","298894045","704079302","666851311","943423520","298358966","130635755","316361003","286519758","192337026","755563293","353998450","783511768","800529322","572004317","324240196","442260125","625139621","550676695","783400167","530248668","200082086","699677149","587396229","756009715","145395624","907594857","874369561","146204635","870109187","525810225","534272285","816904451","964806142","529783852","332294639","261695283","795475633","888494834","127411551","946145384","879591312","841615063","816418108","767840103","178038858","553463825","657935980","327072770","514706598","901627192","689532111","814022760","108114370","603865148","276937139","730662826","572320456","105082580","341071441","216890360","614272890","375331773","479286164","218375751","576351464","486812702","391366697","192523516","500577826","650492215","463213358","504496488","566456069","742471734","218277052","715085829","320312531","517980591","711240668","532131614","396393625","774408109","663687411","868386280","328490622","254959232","253262595","188286740","749749263","870996070","253065342","142907181","104197701","717964234","921350558","429239488","927730930","838483030","876943251","113489125","422821208","166636161","970554795","663317297","319135797","699137065","187246119","519115487","460416222","880118680","520223768","949933875","115282346","466388283","207606183","155605473","340147829","992718307","369979690","423135955","482190467","563559956","357602443","943160891","496787525","777277101","559295336","597213054","728148365","853913300","253233349","404843579","469065059","917241939","424052784","374679813","269487253","536591542","468963178","592755337","406534839","541132814","515854384","823526762","682672870","321192382","244226585","427914048","542965162","944276916","945868058","569905371","894889708","319749157","548215686","680839570","833830661","852094944","232484493","212365756","709959432","920245386","547178792","815586501","547227528","918343685","519569354","975116244","515303004","661554886","207860532","273887859","148862771","833532499","414157099","877255539","667670769","562838795","432966609","824796795","905963491","862089231","854740401","625206198","203952863","693122747","938002330","311740961","158060057","652466382","626421225","764332035","427624855","297267926","851229378","642164263","308235817","173338085","614604367","806357877","927378467","125275175","614107684","461310721","140662972","821543997","620535410","236674824","837480643","303756263","372074563","558941248","461818280","561669743","935872160","467787214","312804300","596706405","718700024","592441377","503574355","662804684","189560283","699073245","740668975","908588760","210087563","848571765","302813065","119526629","518067059","636193314","737428388","410654320","106647981","707229638","645615930","846062962","889614711","115476547","452117403","646661678","106279682","611976024","908955563","649840106","346655526","818168522","472148609","690642204","783180444","874595498","277793299","491244798","515142130","627207710","838262302","355145203","392668243","434268160","357254169","470471541","188057790","213949983","165573746","130741775","312566031","318123489","642047042","234364839","949483935","434142801","490082338","669977407","649435821","986923893","758767436","981370068","280394584","445922433","281523330","978258605","703964369","177852044","717779334","511730563","286782234","785089536","634875727","700578609","825114025","629546164","435583997","817749589","917942207","731682751","104352932","507060614","830466280","913148030","595842450","117288837","660151726","124744837","822650891","566264349","895553778","523399131","788724864","543432893","534612543","168618205","776862883","536558380","190559868","488479006","482072652","340923180","189932575","446385688","174880441","465248559","393568031","142821903","316370424","571812783","729126341","390601274","362757379","747382752","258813849","850438889","899809690","268714220","995608821","740703808","164069977","335780407","892862843","479174398","269138128","296645806","660323640","432784393","843991135","221473705","580808540","806952020","585605786","204294046","504643885","413559788","168165427","557495306","196501688","678361149","530705391","916633578","564613312","615433409","697461960","460088672","406087265","991109152","656897451","893519700","923052118","289108277","367126196","288870217","869293982","946644642","453239053","932723123","707499477","113306858","691000281","421306145","969742412","934421555","331784061","722103369","884682816","415703654","599886467","527877584","633555798","256478613","847288434","941853266","447288895","662064990","834149499","364908555","330638920","860527541","600323585","817806709","627534830","904035063","836179711","787258146","901126523","474854701","895975986","351387987","760696455","823477363","473692725","926748057","820570612","302106258","111932962","246320904","223420197","419718944","965641232","992114089","830959530","178394414","425716867","954127448","905248043","877992107","681384613","365808669","485618117","804514357","620482695","707104039","975246366","252390255","622208244","650369071","413308689","902747485","291832550","913406391","584376442","505308736","288943759","535395386","923256274","993203535","103895626","227258241","309274705","222031529","527886449","311440077","143951370","193410473","462822294","955074613","258755746","762200720","933578665","802170096","855143522","615544153","358194271","481148308","859455055","365056576","773709164","869751621","451851057","914513327","760621883","187682400","247947358","454419951","681701889","512855874","977380766","437516779","268491586","322700099","139084818","915673350","115659441","231291020","808043774","534356615","611680375","925528076","369584215","242159260","445231799","329669778","849843319","680648920","183644818","240118294","964522061","281023575","529813481","757282197","104721234","522173979","459899093","613977689","611585976","997748549","927239839","907297141","500813354","813491076","145131811","884719593","171901867","216215352","137353037","331364011","750948736","429156621","955654142","471649519","446521503","391175112","984508371","388703383","759405074","495425114","418752228","877390875","759344994","412167135","842206635","800813979","545534847","864990685","742626225","329534800","578965239","415477458","609817668","176668865","437147135","637103936","918659419","616712353","144310377","125981821","119537983","574618020","812892998","203240589","108418988","380227146","995735221","482942700","993371407","853989495","523054103","672809575","156047399","549080993","155922852","590970738","959196625","351823906","849465164","687846498","161689373","369056433","965006009","214482149","628602320","608197638","662322969","889253333","381913863","183019035","442560524","515880107","205345879","436515931","820786371","205379162","564049593","303317201","668173068","121007911","545474505","552904987","144014295","198072525","531182536","795750214","836701049","115630670","906214061","763635260","493530479","937563444","555798301","711371068","405027123","161833948","502584202","362780584","652572220","434398550","941994099","130885664","618863950","698679362","526609319","527142809","908951887","405329849","920415777","507699066","364015491","351996549","600216541","502312586","299029141","147766877","152833104","532372424","467312035","862855110","702219628","289045806","272199303","457020208","813522796","568496791","962167489","512206837","918545437","699200118","806013999","701047554","609910946","497681008","409617228","946631269","316917015","850653771","873253242","781914936","104419850","467029336","827221417","638134817","266489610","653911264","585173727","515120265"];

    codes = secretCodes12;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>