<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers




    const secretCodes28 = ["6793538984","5885385219","5820784120","2308588426","1116619422","6232372033","8403836636","7578439655","6157496472","8072725070","3016598428","8695708454","5209953537","7478929665","8943908301","8713695258","1976327381","1318995994","3486001786","7023901771","2638610230","4512854318","4386058002","1101532567","6393983011","4355440278","3508673080","4519375543","3675022849","9767021629","9877733083","5155359032","6751228838","7169305261","3580796185","3466654811","2994071269","4483823687","1233573043","7055278732","8604697656","7186670351","7295489879","3614452666","9392681816","3082455023","7187502324","9101899694","8718799559","7302187342","5709439978","8408731075","2163764391","3530019359","2190067564","1899143675","5513074962","1952887256","1731618488","9546992430","1030058352","8173423739","7131170510","1526224586","6088253984","1851603455","9065319906","9132275790","9444186568","9433016509","1532960636","1910001758","6185731836","9375869222","7504633265","5427315053","5849358144","9395945818","2249284754","4045150138","3092299363","8855871666","5966322666","5966975229","8913640788","9141702503","6387993768","2125109486","8165871363","6279368744","6588539561","8563587492","4161373628","2225014918","8050038524","7224755498","2032701139","4146083777","2726606866","1303783446","9379077312","2901228332","9874733551","7978104306","9007044412","9716346733","8456704607","1237164734","4909744661","2821094654","7007815541","7532245277","6316878147","5624049858","3100228130","7483743146","5713531617","7822802439","6216824561","1758447788","8640287522","8038673734","6200162383","5933513915","7362356335","2722289111","1818649047","7828955628","2532077185","2705475076","8008192737","5202312528","3367576607","5184215468","2792975591","5218118725","7805690071","9750107404","3585407371","1525309683","5317724825","4782003480","8889915612","9963325531","9535430960","3990725299","5117132349","5495868411","4768085349","9795715785","4431855636","2634349631","9914001188","5312221321","8981237673","4419708002","3764553684","5465051428","5960552096","8429679622","6616250404","5169465164","4936802416","8688207739","2644204478","5812831454","1056609941","5854839052","3228678052","7385688716","7268412869","1248904254","6895630194","7487710989","5098371879","2025274083","8868086392","4857490392","4107095126","6047946909","7292471372","9429248374","8862093028","1962123855","7802250570","5080416399","1750230275","7115975170","5963986318","9229244746","2075679476","9131657248","4441734180","7820705944","5831829548","4958236711","8319764437","5322378685","3911632400","8220293078","3606693534","7259999737","4131538750","5058126406","4641444071","6917442825","6904195803","1670455111","6871089700","5876133762","7962082676","9680135479","5509390489","5955300564","8282140432","8884198697","5217945639","5136998987","9714714498","4229714810","8258061060","4824586061","5418718141","4357452300","1178696106","3197608022","2437468395","1103954619","1407073097","2811279629","1125307932","7110685614","4144730921","4783655178","8404592384","9873042031","4235796351","2927100467","8531924686","9122398724","4105429812","7167462173","1488095840","9530492504","6060063198","3847125225","7360224515","5953591631","4878403364","8773281947","2464792135","3385481366","4647305675","8120796754","1545917870","6703057057","4011204271","6290384208","3157216731","3946828875","4308315624","7931270567","2757113080","2209955804","1674434728","6696004577","1375360345","2848267654","4396683259","1993481785","6594946665","9210277575","7117599234","7507556934","1277230249","3626047069","7484850918","8440222609","8053280467","5554744833","9910441217","1147148987","7115771017","6724365860","4631659487","9025500528","3007187573","2895795175","1149983676","9201654655","4319759124","7835835642","5165568386","3287839700","9757600799","2804720956","3906629552","1464496900","6791041608","9108684786","6617417779","9967788173","9109687426","6562356038","8648886639","4013774234","6710321321","4415713458","5561647789","3943317037","1184471372","7920511898","5083037644","7721545327","7065647850","6201810353","5968824463","1685450981","9391295170","3310688790","1219830172","4910141477","8020407243","9849854042","3546957153","1732532201","8708616313","4373106756","6438307790","8966466530","5290120665","5339494999","6548217089","3302076225","1802337295","3032410079","8031937865","1172227440","4255244492","1184217504","3381211042","9921968734","4059509883","8364283678","7932796699","1486930364","8811592678","1025649509","5236865001","4975789310","1223442143","9375591975","4408762694","5752097080","3186204015","5467986342","9522479343","5732397884","5490601834","2667496944","9548931189","2905704225","9370856537","2605337891","2736176355","2491466640","9999909800","1608675276","6786070824","9755904127","4994400852","9054965806","1207678365","5646265936","7769535945","3817511152","4118225418","3568312435","1488758914","9353569534","8894222389","9150838636","9151633959","5868151942","1408759342","5630633765","3249550053","7417483591","9536470156","4702455778","6779790991","8787402668","7990780455","4328599964","7684320366","1464477822","7076713002","9233452847","7658972743","9942844773","4674345642","8519089353","1011745034","3071837310","8771528372","1616177453","1228659003","4518128929","3168165883","6161968911","9759976571","4007941482","5309770468","4445150610","9025440136","1900279085","8447698582","4326436488","2700524017","8311343265","4376396641","4698068883","3917671531","5319585248","4885324243","1921655580","9063645720","9088953541","4804777821","7789452087","2777008710","9189857700","3822420365","8647400051","9665878620","9486923447","8818356772","6491005887","5138727351","8870310045","2481596801","4199269003","2667515301","2147678287","4234538058","5653371644","9088897030","8929814221","6248714988","4237565500","3973938513","9829475005","3378517154","5374116798","9252791038","3861043255","2831028908","7125426511","5540658813","8429144090","4236956918","4056184798","2423012927","7532423965","2582818566","5913408900","5444043372","1092426719","3815653172","9994570365","9436810512","4824905400","4380847688","8020637174","9833961466","4340722338","2991658082","9768357968","2031232296","9865101703","2634256681","7752401997","8616613917","8214320729","5066324907","4260508590","9095148235","7153640417","9872657327","9081037592","5459263671","1092601169","1705401136","3891910432","9166219298","9271252547","4693667931","2002546083","3675705545","9814679200","7771907828","3951562135","2771763256","7221960412","1251279866","8338369946","7337680879","6471425599","7767679396","2857706827","5415581815","2083531692","4421192774","1176144969","5632615161","5229810960","9907055192","6335525910","9496748736","9747183069","9347491677","8992360706","5495154205","8120004037","2610291944","3213434815","8182180108","7701524204","9586437159","1325973453","1214162475","1981928948","5168160920","4282334019","9028846829","7203663963","9313441015","6354190646","3760015758","5944536008","1368176569","5685884427","8893616263","8805338706","7196808031","8862309736","2675690437","1695109400","1153517733","9268736415","5732185081","7228835216","4669931996","1676374843","1683662553","9096209410","8603563242","8463351974","6508658428","7469786559","3379394535","9238712722","2305134454","7659203787","1496350579","1165743688","1108646129","4833735864","9893865116","1955269823","3734090880","7169076804","3843398771","7100821088","8394695320","7387354684","5224486694","7789407492","7940205868","9374735743","8256528457","4003287516","1147536759","7562984121","6992955356","4382661297","4430829913","2852288552","3459875570","6364486809","8425221111","8749716236","1061829238","1855981358","5121143425","2771937095","8598254587","4961820936","1455156608","2479653568","8481045854","1424391754","6210108192","4014027311","5417318757","9045938001","6998675401","2560283762","5256892054","9411113942","9300481579","9375327488","3260344627","9012437691","1863529511","4760396642","1637526309","5078029102","7059690040","4305149834","3814974277","6808605398","8229431879","5962853980","8977363904","2093901539","3669728198","8203319130","3660768889","9532636318","1077873891","6408254358","7492440276","2397529718","5943423085","6951123969","4191873468","2458089228","2408084532","8237150130","4448061523","5986442330","4942421226","2169275649","2723690458","8506191900","9305373500","3134004347","4214499274","9440373598","1354785090","7205688414","8311431302","2167777271","9993241120","4159020420","7148080852","4452697597","9130647798","6773895699","2986111594","3953672247","3723449811","8114944378","9801429570","6740041134","9335387441","3881443974","6579846898","7043041727","5626839320","1968484066","3875697541","8812554879","5491057566","5048933483","2724932221","2909502653","7620879635","6181505984","1475340786","5860938296","6018973824","8702983510","4155781227","9637500237","2035172897","2847893121","9658795508","2951144361","5630800325","2262807837","3699321202","4228092103","7812496281","2022010213","3083710984","2612378035","2621563966","5452705240","9602392899","6806725045","1115005673","4869946145","7330733248","5204243647","5950045275","6749954909","2556843377","2592081061","3380705200","1245998869","6910049405","5704629756","9429449153","9882765335","5207730838","3573598779","4082837232","3568435220","8204079163","5540994823","7117138427","6487465267","5179939883","8891904774","7193893256","5182970496","2735477940","1577309163","7494866949","9134229238","7547135971","2221841419","8608362177","8567506839","2168948814","2739085361","1491902995","7279447750","3126695493","3482633128","9844680326","3081079762","5502196269","2021359590","4120519490","6456156470","9195924498","3680249377","6943040182","4121545578","2765253189","6301838442","5797863013","7098536907","3856598793","4155012683","8343871159","5829111326","1799291208","3578576735","1934706863","5407811893","4140178053","4724322846","9272765629","2888054198","4733356379","4267007729","2062596479","6911622577","2833450685","3809019655","6202995656","7701686523","1820641177","7210528358","3588693356","6411047366","3387975348","2343112638","1992307103","1678263415","6606668110","1121255335","1315544832","3950591952","8514891420","2181113908","6848677679","1504860038","3374928536","1447892840","9312847895","7747453134","1514181801","7049081098","6688195392","9355596213","1235093416","8946463318","3499674571","4279711355","2256127620","8817388195","5386581909","3746435040","8622781693","7980141665","6193406407","1563831726","7641872045","5483071657","2440291942","5802126113","2895969022","6010342066","5350379715","3252090375","5105084119","3306382689","9807465517","1752169398","7052531666","1161005572","6175449854","5537552659","2194979528","3030614473","1748770512","3000918416","9698100561","3309527215","1983523462","8109284409","2057209706","7997361431","6622848093","3800821393","5324651396","7528523407","4260920628","8808188607","1651315840","7426725576","8231208652","8403056348","3806761594","7903873096","9879609839","9300434950","9304593075","5898084873","7162134577","8463339070","4556984435","6908612926","8722017185","3338198945","4985298150","7314775047","3296233079","3440937763","6041294826","9005598589","1443403264","3320332392","7686624864","4340749393","8968109048","3428602365","1592690155","6674049871","7156987428","6547445096","4030085814","5620890644","9952625000","5144385954","9044960599","1302624452","7850044173","7538633206","9885420563","6565651995","3670517234","4221597589","4392645212","5571949423","1571630163","5111454310","4188254930","1647875988","4723987417","7231704114","4028750985","5702514711","9937549485","8973163449","6505844156","5069876263","3764343224","7833726864","6413404186","2323773913","1756502379","4180742430","2879451700","2342243768","2834514735","3020214413","1091540176","2049397069","3036575983","1994569637","4771042126","4955811686","2448985447","3180202078","2534448380","6257410703","7500314319","6024097602","7617710888","3621592351","7120560951","7261824076","5859852139","7810186767","5030612958","9819258520","5448521850","4182016173","5249889113","1582567098","5483042396","2715815119","7809251637","9875607368","4711120250","3090564014","8687227172","1873598060","9815149636","3480427472","3346352942","9323449746","2011942508","2531275322","2946757011","2455660604","6102026462","4200165543","6617154333","4812537230","4314207415","3129959068","7872691772","9801625955","7786061754","7187418654","1539653897","9397027964","4359576281","4191611910","4670293866","4554276910","8778996351","4677483817","6385441740","9926996829","7277988676","5210552960","9194576028","3243641705","1577966657","7087597866","1500996107","6181581957","7277767587","7193946429","2535439901","6305930569","4212864000","9740472273","4524952335","5248419343","5243498263","5243791270","7024761343","7401168903","3194271284","5244009661","3450926978","2861119922","9419563662","5737027449","2931181306","8688501343"];



    codes = secretCodes28;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>