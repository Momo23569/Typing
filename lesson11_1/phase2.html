<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers


    const secretCodes14 = ["915221266","586056825","384514113","283941515","484591655","908745259","866295157","120536887","504712951","606548696","638047271","895986941","363578148","387129041","423982096","447604277","945025780","155069162","172840188","478915371","508906660","894928890","624091457","699764028","986598998","136610368","257758040","934593784","127330033","622391231","388923511","285643264","514110607","646139548","550398950","658088077","977272519","940467225","476837769","407124072","326149041","364808046","271319225","185935961","184180945","492150296","282907788","558072933","699073067","321702932","529330313","953192541","318313307","406012406","805739494","664358539","690493912","449822634","263855503","854658301","280826967","895442457","381062318","537510481","259462549","646060594","629328264","745896854","955603903","463033662","269777307","634862026","291888630","301507722","703655975","161821375","766196406","845281654","754646246","452770555","583154933","323714021","296713272","318202352","457408033","176858499","266276117","242109965","901088719","264731390","160394311","339443196","952513385","845668416","346555110","195020469","836034639","115625788","730153515","824802430","785631801","395837934","148170993","929132081","547841677","642620579","967982701","739690231","873645827","265027794","265271303","979782739","943548788","706085430","257287781","795234919","627921352","163230239","278366128","901167073","426637146","692495766","681819132","877983448","778532356","324582550","722432359","297693813","538509455","827307074","295846261","852962948","430434532","839961971","660228749","340018103","735980651","751848218","128393285","109345598","765566578","889893118","287164874","568840061","470547913","887282202","324200782","512227697","455708386","879597534","737712390","233129779","893839633","563304908","437658050","610396465","370732585","321204827","393923390","502966236","124624274","859945842","847834248","175456185","375142708","585024289","399877876","256739945","461446830","881553748","348167898","783216098","859939470","896984748","603487506","832450838","100468699","194048471","501752385","574722215","590973497","442281573","883054285","317019835","985956703","253825800","927615056","769025991","490276948","990247130","588984649","257371517","487766089","353513411","305456418","927359476","746665527","346615648","381682235","202903016","282845021","884228200","695987242","940076236","233975379","893985084","844853641","192820230","890528231","400034388","279074946","949581187","708986594","823946356","373893276","576050499","363128259","814687411","752600062","839462652","232700413","720259673","677648842","689375950","851566720","531185190","787059510","527483014","851608168","649114255","158626279","680783269","362055041","682604700","951869937","551690963","857542807","814732378","767179991","829139020","954086968","823853205","620653542","567775893","678037913","863808373","915109781","238612368","359576000","199359256","390918321","782629458","223898582","995363578","122282391","591147709","666490303","815839983","238953274","355761980","268149468","838652993","930324018","377060355","212075412","257805927","870586869","382886438","872893779","420409199","766442055","992492400","285588380","207038149","934900848","580155321","493881358","291740989","741426943","473962783","869795726","310401002","723480972","838644166","561645875","352662485","963395232","517614000","683421215","301042747","844420411","739226575","189299667","581629868","360622915","680230235","577749229","583269964","551677777","604538598","228775949","630737652","430042860","573543680","654800645","708182008","155999945","429784827","989965421","158791944","465101896","495553171","609407204","248385893","876237142","905825218","522507748","108058156","362618914","640454678","900388993","241838511","206388792","942233239","299235288","466047264","345551854","718874439","878644135","435017519","677892212","159022434","809452650","525286430","613803264","159283304","527660847","730558351","255675890","970540654","947941391","697052044","513921311","895146459","632017713","220738306","497811002","161081890","495838470","917870952","479174817","949487095","903923458","737474794","422803614","305959984","269299079","422494994","277840737","810761771","245454002","538184535","665753201","149923363","183654290","476938215","828809329","997871095","127707453","263813094","839508143","672615406","951319480","706357037","102858883","355604965","600883695","844566407","372453880","694964041","283050941","591780806","720494522","172303315","288852967","587540553","690681279","473164776","488567291","774115681","939358596","576665134","577006331","478952338","644610009","742605121","508067075","345892177","363504084","628903588","501911926","423185434","917680975","159369965","138912975","785493036","319383447","915372591","691693596","822762152","258952828","145555352","315681513","476387238","533944761","769690944","726754786","296581297","762187495","216917694","934046384","597623152","512443527","257656433","689004272","819540917","237710270","403153785","801308527","914487684","712702153","442675504","436222673","867894748","277291857","956442104","742749667","923540831","215869904","425983549","913536840","680740077","871518501","374752051","960596811","951507068","228353088","395527833","619337346","798733196","592406213","249436762","430306397","718547693","131754295","719527711","205867107","594271888","410053080","867703350","272633730","940126389","126529004","375914870","719198274","489895460","309467692","704423119","730331392","685140605","420493340","237403431","499777259","451883792","404743408","692853760","431849308","520620398","787179523","525173434","692805121","870756287","696009798","938545718","619446975","842397098","778069703","931131103","349006206","918191624","893609142","761804168","806150473","861993509","910994554","298396279","427028047","804301993","410556792","946129557","549939892","142834776","562367737","737960603","449290387","225063417","555888945","393775062","484724300","750760795","732986534","909474591","314835299","195792560","457686847","415277840","717437817","145312737","318528384","850193285","928415629","258952658","807193460","625666186","833782803","751107806","175275586","133626839","279835307","928400396","963991147","573333943","882303303","128389865","847732354","761040808","716672457","954239872","206128049","835710175","610522557","292138129","808297701","567798262","476207573","248030931","364105689","396711544","742327557","852327057","722899362","760240349","556353408","948380264","620835004","260968697","649717970","221867315","830375186","290556227","881536568","161352992","610259362","930463834","745034422","415082653","690407886","454373022","575318438","722222850","530264586","233159738","201256588","344227810","590818794","401269007","631856225","800733307","101658826","561036293","146902029","680400974","725439907","878756211","398752023","973567172","299045351","272153140","173339536","794407633","147959349","541556319","358974905","586779519","837450156","892882888","141340136","572991813","233138760","615465041","216400989","629767113","411006807","330160999","343108765","511810993","174900753","323093778","271557658","128817226","662221881","713051988","836226050","398098228","479525190","108698976","737875343","164733418","918080106","660233100","296797244","289962937","486987667","325386390","429574191","604945118","329794118","298678673","737426541","824693763","483330780","250158562","449216691","647616444","169443158","810530244","220592637","462581172","226116986","982675413","584256088","910473864","344296379","191582454","721627526","219302118","154347432","132304036","946246419","562499097","554337036","899911074","657582871","275003757","843565922","770624415","899608422","566915117","859264367","661561440","440110511","877052859","697649745","272959422","872726176","362118626","410287868","604156417","940833791","733077073","881850360","530492935","980665623","594461755","284658243","807557086","869023757","606237194","653818187","527838086","927576613","466542956","106953072","908886417","185311782","618453731","868697617","604825514","360536090","635452266","601636301","956481843","801972951","493118736","246558957","952449929","454818545","875684933","557174743","449721393","266008599","976712584","193556684","479358485","864002079","448325466","664540900","110251860","445841105","256474301","755978796","819420541","261061020","869811918","814167388","727326228","799492632","786041954","525200746","112945896","854952812","967380779","117186211","528155362","268039933","258104659","245076357","311639284","365573863","691295624","560044824","196962140","440236191","203280466","389466225","362868815","548897575","585742515","894248067","648592628","619633897","222171085","202484291","760445694","183504557","382693002","130496543","513229179","712046747","573539121","578302112","627463906","370049922","179733538","299477693","410441704","946257988","181018288","283152152","995669316","468513416","302627031","877707227","827869828","439790506","782136519","464990736","455588329","350788714","628004516","244217015","479893507","324495540","650167166","208843971","642689731","581857904","465064506","122516514","976664002","331270728","135939848","953834522","614664516","305638375","735595600","203387308","560024086","419480827","149602522","867256457","920922332","404095553","746407459","830334231","725158621","386291578","400404572","426299633","372834081","699596637","433714980","174401780","601559610","302414989","781247923","621965783","560028765","103709318","934516712","720877302","971346978","558502915","738814087","301869927","983569039","356378201","811476104","270599347","668249360","739462175","556257999","523063355","696572034","413885502","726332963","778322531","918508430","728469378","106489273","484081349","661746934","890914994","341009837","422770754","601979013","337192413","754630608","327017503","352593491","775387650","303839087","758980227","780785469","931389759","998011999","278187401","350008984","560527926","590715032","101163080","373638219","265119232","308602920","318932372","447368754","424668516","923764924","767127045","947330420","873731006","598024989","189462143","668871843","229881380","451581903","215520753","779985430","100673829","173214719","197986630","540508214","473845513","744034263","549151068","334616217","343307953","940547078","559120113","275102864","314240717","163320166","289956037","454235507","185361416","785434832","247861532","730024953","529026243","273428206","182652535","979288160","204778757","787591590","102714486","542182015","618528089","873985821","228997745","925491419","734186678","272764146","349522394","504994471","918587556","915822292","761412545","789459146","370749002","845747285","187081213","717471555","521653328","389810416","686423867","193150415","426791432","751179844","979240305","641285697","406473138","878269367","768920579","131855950","771112920","365706286","537846597","393931143","377483901","639951354","207571723","705994583","121400906","472234139","399119028","139601563","265367121","236590331","553696991","123960174","577096222","962282434","807894329","365349790","860806958","427385903","944851647","704886484","684784920","631253069","626204459","838443793","890873795","571732393","970765635","155480589","598638887","480908241","859092255","520443950","375949624","436329089","401731267","434217046","239259175","834401371","340885535","725478704","781170541","725506030","785643403","415576320","446026558","906808544","792821634","613135109","881192718","992183857","700836468","597641216","107503844","891743593","246126544","390106025","755686132","292358975","383485165","383498652","366109206","354230230","851434586","611432977","375205550","808270107","487145010","227659120","574508223","583440835","601495163","182197521"];



    codes = secretCodes14;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>