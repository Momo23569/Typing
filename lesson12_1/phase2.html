<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers



    const secretCodes18 = ["473546716","385817317","838861968","437502442","850652784","113403813","488777833","664673588","811872985","390125655","282144871","199434822","629922077","174346188","366981110","568870722","912690097","950979068","457541470","556544819","276880140","236610405","939399851","807991171","589299080","626014496","223672181","814318137","812312674","684472980","131332096","571213585","468763409","642900526","552418892","857885519","205976199","388249492","697580014","970304632","854473346","192879393","950262235","532510525","520680034","954869148","610221554","350492371","483011027","486668987","320527107","801381926","430788164","543922713","795344941","279631821","304872358","790559134","640173910","549945819","952492531","962650767","677087653","921321672","570829617","703768513","975603547","276154694","737751435","858025462","679308824","398750111","556611741","897051741","183733015","209111895","393290964","976822325","710423378","167966234","622991528","875715589","584503681","243678071","671297001","840740438","158739848","759835827","445924736","530956328","206364614","550935640","849874420","546129189","836413127","396351144","325779989","827683495","771781069","417315257","204527900","532142921","202440942","498793546","357799598","732070351","557643250","346132925","119534847","550741472","771047842","590024290","753639941","352381153","722777630","608593852","794845952","638463412","526203203","450391323","927649938","337255865","192887051","964844190","696234033","461261530","649429683","412744577","954865055","280269847","220179949","821278573","787972711","941540251","770383569","340133537","528343349","304159722","647091583","924729330","915609405","175240573","500302525","663678404","856558716","685484778","569332005","704202975","673605257","313849710","273659803","168899885","147169396","705537515","606007433","141581756","167634387","474884915","134199001","555945763","589538554","341701126","677408899","384529331","235474398","690871346","716703779","994364783","443486788","740779788","767740068","392896253","345688681","640204805","699830787","505333542","748113137","178402694","601462316","152488252","480243501","593367075","217590629","691664960","139080668","494905265","358779217","434111049","914430910","451459689","970866886","145884278","252434390","951280423","868037331","832235069","666714007","188602856","604893042","498824190","435696117","847089067","474068686","673224450","418431113","520153585","455415557","313708324","109263516","632860471","514919107","988403207","593378301","616147239","373415671","225266203","233682992","629607827","460176708","694695639","824034323","372611109","547939757","769209588","904234646","807454626","345439758","497512642","256171679","718055207","529440908","976826744","259933520","893365867","358168059","334392476","803655394","780592232","975701214","880460511","621729556","547144971","715769981","182020660","653060571","389736154","575192017","174542718","473790797","307892715","129465324","710393714","892032919","345121906","439497665","588963881","961683085","305226296","217239360","575623467","898230320","911856220","393687867","685598075","409984019","798696175","859769800","457514194","957657346","162629940","942559509","244698961","167111368","242227385","877595994","218034656","837613299","238679238","729188313","597671974","349207077","490150984","975989635","314014130","405456884","430876526","445660098","549631566","252715895","545079665","727941003","213868446","331272917","854191329","970752702","400206985","541537995","144864313","688940979","802814208","864183385","751494391","714307787","496136724","999172022","649214467","438675347","464272823","244622395","249044498","809512414","858677203","424604687","531618312","454398271","518449019","893713021","584091160","403271833","970806894","949301122","828152045","575568032","206339063","371714734","550707117","159379338","118898548","226369982","229311699","610868922","974478032","544676825","474999530","526231405","651659390","553676021","423958184","980422752","938327231","700944083","131774029","123301912","989346637","480213332","173596884","528565856","187492080","626982573","362572203","591330273","197739204","981023042","316525610","378551078","918574267","692563114","997621130","553642490","149776251","452729146","993885768","577302600","943471567","140841369","458289911","540733297","615858261","167039907","986844566","803254960","560907897","532539516","232335708","945624762","298308376","978552196","466624070","460048400","563821594","307946753","948966984","411103606","571750934","550271044","232110705","657569763","286220646","205892947","287452010","565211300","302001092","734442094","650734577","833529166","395842622","192644420","864665362","309419518","507181478","449024999","882204949","412326533","946682178","670575924","127466439","297948118","141680217","494643371","200311931","570836323","518187355","382824779","186989509","651203943","744550407","137816461","239726887","672301294","573456637","511458105","540068803","265328501","391650305","112337420","428020296","494935841","132263552","105033906","612662524","472244306","930329299","513249965","472081063","659037907","923246716","528127950","191470228","535501212","914942778","365899484","283178837","989449617","560774963","658927526","233785842","315887850","214579190","769681992","201792623","162841983","583674137","690699398","415922389","864561599","313001036","311710901","291624040","293221854","704503262","970684903","305105604","349708840","959599801","552611836","381056935","510539921","179275857","311560872","703522217","492500651","100776321","933813342","341556328","364655590","181113578","492305145","842267597","535744008","905208621","183374071","847905250","608717528","896932632","451824681","908754904","437082411","612643780","835806990","281061594","178874941","443705421","622393266","982357382","779740179","940509748","646421107","471645743","165810849","324994422","172166319","144424663","913950113","263216471","464062713","260277768","392101638","477032050","713369276","913756024","177811314","609550541","603561087","176452463","332904827","121730252","512455389","575030321","727071325","656307082","832693352","728277956","973652130","351367821","118857228","954042804","392790656","990486018","497027092","128701220","710804246","660485927","301574983","350073222","416068081","379458971","341525317","302184211","436226807","786994342","156702695","918231588","466235057","617505177","201029069","738227830","686275828","379573116","421577955","972073291","848652626","927711955","256596784","182888652","846373135","226769457","187170541","132434771","834235278","935948968","815267279","983227761","726245479","706074011","980377350","764745845","796904216","569160056","541657337","918655385","366039795","286484027","705773905","561494919","663086500","859786608","352522352","777822668","625452355","124609614","353860870","331186434","482616324","196802773","426926488","381597959","649888231","601409198","207128676","962059115","877165750","748037214","324873332","759566499","137774181","811546864","564819934","281776156","447894003","220928507","819837592","407018753","287583945","746950553","856575908","615659340","731848185","882956942","805950890","217387988","437241511","589861336","852181177","960790305","244673155","340245264","278519541","769367640","622205486","750638575","941199234","734250434","823501884","303294853","702809547","234377045","607883849","855320052","160281405","600522310","799599338","732341186","685771622","451784066","171643875","241155226","392421870","954099683","505592509","416063741","789079965","957857992","681667990","441506453","731054583","782989573","266167558","418177251","796540966","537802294","976453414","822684562","749895687","675929989","643842523","202709753","492259354","576175251","112670810","343255372","681876714","268999085","398835073","177120913","184276729","153480569","774979258","830080084","522939607","647722486","741564571","495745864","567709048","803118111","697175290","123476354","343335655","474039703","375502102","408497848","967946081","444521313","515380279","528448813","354060795","791543460","170682493","233250937","241698211","303288700","738728735","307378874","725053439","829653790","237732029","959473312","351523708","539052279","937071225","586658577","327977062","307534183","548952351","931124250","936820548","275993150","720349664","644108264","762318019","950010305","801172704","687874114","180252154","160959414","248332510","472816657","885707131","315016938","901685212","296443252","972206342","230839243","592060283","758714122","796400869","693698817","538958650","696797451","472163979","942313066","886720584","656515705","912435504","903915811","875050790","723788542","331302394","866127615","184848923","210346533","824735663","973890181","445611475","214173892","148997783","730556066","950674752","444358226","310906141","472778414","593554140","495374665","645400633","741878398","237306912","139385208","900841355","576190017","308797187","235617406","416145882","961267269","552374617","747811836","682234396","892103250","845725559","194011102","705104751","524410927","878868433","340614787","104234553","234489122","584964307","823652654","568459286","467641635","764498639","260782454","350754424","656480542","527333480","776027682","560950233","145072953","873729673","187193617","508798403","824394830","844871693","463116101","721030293","334244752","791459899","915989600","553600135","758882165","272093048","270088841","156190041","502836738","200493186","147430132","711575849","223009278","468973905","641769991","949163152","814581414","139424583","415079246","636810859","910461448","747244327","691327255","791139260","894718714","828194886","334034376","809303312","457960257","934002643","864421385","745541454","362878019","799150712","249099387","224836338","151284122","237746333","419863127","963898284","344797710","483168257","706838675","639558217","913346897","468196999","317952877","618664874","311577397","851606248","790654413","209919466","656002492","925547399","509139864","662116093","619627436","573175015","356794938","389104811","833186016","865149510","297544072","991625576","217084983","585373924","819123880","511149774","758343042","557657547","367429643","123754447","180042046","162213877","679624569","898603512","847565296","922643612","135695549","544714430","990605368","467213078","357088866","946249387","719471977","655264669","348598009","183371757","427728486","813833845","746183947","345998113","978737398","348006525","830177079","150174952","499415975","723663817","944832623","463057950","449960353","505304795","487580682","128151394","200819804","826814115","724851747","261874529","482360462","414992792","393831089","580519907","722641277","375759171","179080335","228675701","762303896","175801480","820221588","618293126","833266593","615991484","841014589","282461846","574958257","410967800","410913199","428658026","955106564","372549024","469914332","360950309","978125785","897030915","193800755","582785521","537820857","255568851","355108641","854157435","410961820","834887407","404387320","106198019","672196137","127618880","295847255","796371180","590184178","563028679","172445676","646146370","691623438","969327279","615162083","542282626","565051293","860267334","804501103","807775014","414018986","613961541","661640686","452252983","135469397","187970978","927351515","414641612","486368958","327262286","450985952","881943260","342402102","516385302","632777232","775925968","893627884","470340880","141044341","138112739","684209948","516513135","452927897","953165232","220368812","634205082","757029707","875286805","177438825","620276787","531808271","594231259","652781806","861893583","443217242","182335206","560153167","391117043","453802038","946117676","371226051","387405401","729186511","106254287","474812411","537566522","608484886"];

    codes = secretCodes18;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>