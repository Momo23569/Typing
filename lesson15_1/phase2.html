<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>Korean Typing Practice (Phase 2)</title>
  <link rel="stylesheet" href="../style.css">
</head>

<body>
  <div id="game-container">
    <h1>Korean Typing Practice (Phase 2)</h1>

    <div id="game-area">
      <!-- Countdown Timer Display -->
      <div id="timer">Time Left: 0s</div>

      <!-- Current "clue" (English meaning) -->
      <div class="word-display" id="target-word">
        Press "Start Game" to begin!
      </div>

      <!-- Text field for user input (Korean) -->
      <input type="text" id="user-input" disabled />

      <!-- Start Game button -->
      <div>
        <button id="start-button">Start Game</button>
      </div>

      <!-- Feedback message -->
      <div id="feedback"></div>
    </div>
  </div>

  <script>
    // 1) Define your Korean–English vocabulary list
    // NOW we display the ENGLISH and let the user type the corresponding KOREAN word.
    const vocabList = [
  { korean: "건물", english: ["building"] },
  { korean: "돈", english: ["money"] },
  { korean: "돌", english: ["the first birthday"] },
  { korean: "며칠", english: ["what date", "a few days"] },
  { korean: "모자", english: ["cap", "hat"] },
  { korean: "번호", english: ["number"] },
  { korean: "올해", english: ["this year"] },
  { korean: "이메일", english: ["email"] },
  { korean: "잔치", english: ["feast", "party"] },
  { korean: "카드", english: ["card"] },
  { korean: "편지", english: ["letter", "written message"] },
  { korean: "보내다", english: ["to send"] },
  { korean: "축하하다", english: ["to congratulate"] },
  { korean: "길다", english: ["to be long"] },
  { korean: "짧다", english: ["to be short"] }
];


    // 2) Define 10 five-digit numbers


    const secretCodes30 = ["5852512718","5876453160","6609581214","6662335168","9881681405","5652345102","7221624054","9950204846","8164509217","8983484248","6364275855","7119174279","1790961592","9058031487","9734282427","4634484124","5299487452","4710806833","6581427483","9371980902","4400465505","3950295151","1587101644","6575670996","4019401945","3244310578","9725718798","8563284977","7387562185","6524376755","7252642326","6332926796","6955288456","5398215990","9379197984","9599531336","2596562737","1594388914","3294064803","7632975476","2456863197","7549253879","7639630602","5823224989","7338557514","4993460052","3427103069","6007610985","3744416684","1576614475","4613483077","5017310247","1660082691","5074804248","9042126014","4265556812","4552561392","5462116330","9478888953","1437077621","6263616227","7002804809","5888411770","7520492354","7802114237","1467437998","5291690647","3587821203","4294998185","3358648494","8922150513","6245487623","6408142893","2015068584","5790704192","3325719783","4323949784","2614257884","5401781553","5049806959","4568310311","8013020032","4590935416","1893952124","3244891722","8890237315","1893324418","4778451653","6249600702","1320622780","9232169433","3441514224","7560790623","8489049843","8644154289","4546864523","5847836902","4102943506","5887700488","9007591592","3651691125","5558113382","7469016043","3773449107","2646744210","5282834698","1336919756","4833512248","7649389074","7480094583","2001291147","2610126005","5528151340","4024934637","5134106705","3781111006","7267013750","4914550368","9827693505","2755605608","7859277432","2103348306","6972266481","8998388180","4475391215","4344118948","1141458004","5169961721","5084547631","9682184975","7840877408","7318621823","8482062021","8169749052","2023578672","2677233410","7597320046","9035473657","4897253270","7733821133","7678953047","7080285685","4975836337","8542115455","4398675640","4042038088","9820270669","2075295989","5061522689","8008530281","3320186835","8740844439","5133931271","4254010837","1388475852","1115409755","7206226301","2117982018","5529058063","8627187571","3990428294","1750387208","1725432425","2948636901","6215206290","4329434752","4464360164","7010119518","5277032927","1432990589","2159562994","2761371150","9207868559","6955237130","2195789416","7353154787","6057092182","2392664446","4633267733","7673338956","5517858141","8786526224","3578493947","5633366940","3011868694","5982354474","8323763043","3411093550","6907010185","2847611756","1966621370","1991719776","7962492051","5764310396","8175776724","7843348210","8302603615","9637490703","2748320445","8590485040","8572591277","2726653419","6851779382","8311342672","1288075264","5775333905","1300442592","6964168099","6452378658","4623649333","7381805848","4192076580","3595639173","3309977742","6782787959","3565814341","7153162747","3268293765","6685352826","2774041331","5694953115","1592728961","3201255679","2209562965","7462391724","3937544224","7622458236","6228124015","3192867593","8776529175","3749224678","2884664155","4642784513","5696076060","1311563365","7131724124","6591917138","8327651520","3336821382","9650059565","6854832985","2984075279","6192765923","9412662583","1747679763","9267436962","3992772652","2236726027","1380975185","9768775968","4198338882","4551402847","1360732242","5053452080","4331040913","5982788490","1983033384","2145383681","1122656967","1156345291","2925477113","9245041020","6629252799","7231682006","5255811418","9048719635","4013277072","5329743744","2729050182","8278612802","9491322159","8547329119","9227374548","6036025900","6440144973","9658770704","3322360229","2056016919","2111149568","9580828367","7070169613","9532086988","4338688680","4680491144","6390011083","3408147349","5706540358","2354998158","6951880519","5585877570","8322715882","6457120540","3529580624","5904434988","5364151608","5549695939","9903912600","3093263839","4665215196","5505753018","6914301739","8461456288","7069369617","6608737048","7544008994","2583651980","3383050483","6683449842","9555104767","2881630424","7201268370","3211411865","1801806743","5954805023","2742281397","4384508525","7307902277","1077378117","9863885253","2539473110","3015749212","3431257294","6000210222","5428104174","7087292709","2572894217","5039205904","3262818397","3340336850","2792141222","1545447715","7383564612","7825480565","3318416144","3326338663","2295648444","1819475462","7474382497","6572251279","3280663412","2948125617","1789668308","7764560037","3624329839","5835645195","5108290903","5038765158","8805504661","7784156663","5542266832","7885183187","2133552984","9916188065","1701908010","1333112908","4702417316","2283969788","8531296610","8462631021","7107657077","3754139563","2551385700","6990040670","8417050637","5991510247","4836704783","9752742035","9537915489","6218560708","9792308973","6858837145","5206484795","4149731655","6640954761","7723992881","2603107265","7677861948","9170482790","4221945582","7094923034","1364444247","3544617329","6510719452","7086652878","5599679742","6087386165","7284009144","6515646573","5560090777","6501770995","2382128692","8185453946","1213594517","3073241136","3609935659","8618342262","5285187695","5739559718","6101618272","4192583217","2907080790","7703847253","8300921102","9594910793","3354812391","3195213080","9646538685","1422232747","4406311661","9040223116","4874620845","6248805869","4849363195","4463020625","8865908447","9249138232","6471237761","2977695779","3766847016","9425016658","8937712362","3588428554","7362614558","1808093640","5735193776","3950590842","2235290588","6774541564","5844198036","2086269947","3827149169","1554907913","3412384533","5475847406","2210319520","3600999866","1738109521","1510721988","8963457676","7901112305","4518804463","5039357351","4840839577","8173416241","6531775615","7266057633","8113977256","7477834004","9246943305","6492972127","3357549213","2899648299","1749496356","6921511700","9078664263","8646187918","7578237368","4981029606","9062072692","5739369737","2802453192","3736343728","3310081518","9671949951","9271349101","9875484646","9835124603","1648773824","2437403362","7975998615","2207456719","5420568635","5876141702","3050276736","8521332469","6110174053","9054111380","1238545959","3267750608","9746674451","8788100482","3468239276","2880569585","3088945797","2781136902","7585547574","7957410110","2935348131","5506252250","3867404603","2668604294","6092526729","7394475888","2209680565","8808874337","5750180256","4476392073","6685861761","9476284815","4654773448","7049171514","7392040970","7404308866","8115089667","9134968521","4308329627","5796923349","1690119878","1333231373","7488031705","8424079109","7415319179","2661819019","9300538728","9433344063","5488229046","3891194779","8396710263","1775453529","1198845091","7145586297","9367869603","6339683675","4538976034","5158029269","8204547262","1436321143","5405075275","7529046522","2760906181","2138306325","4216561200","2687579798","8301457264","6025454910","8912064243","7949862020","4769962166","2290571191","6974600146","1339201997","2466518122","8616887751","6619267146","7872022514","2021412594","8888459917","5770244108","6835385313","9883114195","2674981021","3597010501","3823012616","7729507203","8393646583","1059025008","8827647693","5351602130","3510445003","6068827945","8320102581","4688199336","5506206743","7215525438","4319134056","7225494846","8237898725","8947655475","6048263615","9209316766","5135443113","9996981616","7093875842","9763569171","5498178856","9236923219","4610929248","4127054951","6000465461","3115401648","8476448929","9502478887","4065648519","3953636185","6016129263","6539697232","5110893235","5605655627","6341182007","5379380172","5592680898","5651774905","2337885268","4294739593","5463022093","8950077451","4169762377","4004118539","1805675224","4461222368","4558643033","4908553595","2313380470","8231119567","8059637138","4872395810","6450706917","8911291075","7704231840","2404236412","9425032247","6469042327","6572630765","5547783164","3067233856","6552515495","3127798924","3878415728","8026444654","7522578875","2087726519","8271353072","2306370736","1326192233","7473803122","9308504929","2337549232","1956086161","3212343858","9008859528","6438415003","2632922174","1193965677","5006322806","2272563094","3633678896","3904791995","1900929350","4458727120","6940959501","9870110215","3012668248","9981588872","8874866997","2059865788","2861567754","1357477578","5546456558","5170300604","9342629943","5026356561","6003202207","9271609269","5645661998","1380594796","3903256134","2125773738","9073539225","8104438967","3856800302","6416097302","8236768515","2230432676","1833816527","1904146843","7050796240","4666228386","2524125886","4240056778","5467487753","6646584638","1246373473","8647126816","9086445468","4610325379","5810635061","1927725761","4022717888","9314463453","4665129223","7179022642","7910637528","1540326584","9927270796","4878515783","6876336493","2668776684","7239745689","9603632871","5251869319","5112798557","3218737291","9670100862","4407930526","9360676059","7867423278","5635888827","4583305256","8074940585","1556554843","2502391792","1178612421","4373199631","4063307907","4967509860","2734887051","8840424512","6104315948","4984735062","2531090361","3319726411","7337842543","5990088860","2267896915","8261364957","5881670587","1259385399","4497733622","1985353286","4390612048","6901838950","9400352562","4240319738","7780341786","6971168868","1374006169","1998354975","3923740365","6787593652","1696450410","7770738875","7119198027","5430748131","8025189762","1244599215","8395951122","8337273707","3538789474","7046903714","7290207215","5225905099","1903229558","7717778411","1212824284","3448320203","7288992326","4402940222","1373141112","5850939402","8236566821","3172763701","6626616290","9299607260","4395565319","1160009348","2621226591","7214294632","9200011718","4254914365","3844918843","1708368817","7499373518","8462839566","1232992960","6004418890","5575497577","4068072744","5827851262","8694325810","5062366697","2438970319","7465025146","2048718693","8525238372","1368146856","7562366398","2577637547","9439339459","1050064509","5359607234","9065710725","9685876485","4668349770","4570767606","4650274980","9396958836","3362556788","5385847831","3684555290","2381870974","2477339939","3321701260","1865525444","1917700176","4781207690","2959421335","6001768982","8767370792","6731789205","8891804895","7386752117","5362500003","7674932473","8509160951","4426429189","1111880395","9278746177","2665514088","1060513113","9874510966","5194984256","8682622552","7402943337","2216319369","9582567338","5709582023","2783854934","5559543466","1932191375","5776490337","4652046596","5653116251","6670309169","7193508397","3186517525","2023047501","3106637111","8908409785","4447786740","2329514254","7160573315","4652437903","9359308335","5322835663","2755635796","8797616949","4905405706","7576516140","8550280253","8165727620","7777596901","4115410631","9023622267","1041412508","9908622038","3025019466","8757222323","9509363149","8641169570","7460534311","7872810747","3662183615","6770911613","6089655918","5715689566","9907917374","9106326141","6354938712","8238472387","1219143634","1109840582","5094679678","8688655147","2184862178","9921167114","8888047114","6936997484","8055127947","6141885476","1958931810","9960169499","3326772980","2598498101","5836454375","5651810163","3139533588","9430891588","7464483292","7481299875","6967000499","2908423356","3149661244","2963509918","2235685243","9238612083","3267940518","7861650965","7636795317","4107155723","5468552275","1036621891","1470565420","3456761869","6615466521","3262560496","4037204221","8562066032","7578714648","7262710012","2367609221","6783931284","1994782174","2069793882","7556200431","4793034590","9494390294","7146925550","2233695072","9233949679","5786231248","5233544794","8046966037","3891914918","2533201996","1751473859","3884657459","6891978255","4589511383","5916060037","1365994718","7708790290","2440231256","6258059070","8419498060","8181869846","1552460083","2295823352","3879071886","6756899414","5489496963","9081866651","5922792543","5001166535","8639478669","6315449035","5685691487","2560975709","2038123545","6900436043","2376048594","9678435695","9378568792","8006698610","4522433318","2611812350","1643782044","1198218900","9069058130","1452267702","4692642117","1704608249","5815631779","9034993819","8279994170","5889869261","6935515911","3718972081","4097416198","4390299048","3138531281","1241490405","1965706067","2466026613","9744489161","7235241156","5055926418","8224983009","1404515052","8173583537","3221001901","5182818985","4098350464","3891634208","4577026390","4420898841","3622217094","9282149954","6409287374","9320564042","1701058449","3556763672","3025581674","5452716139","1000377674","5681715854","2692465936","8745410840","6154338451","7919098831","5205167263","4759194526","4346899665","7071735039","6831000972","3231025236","4944487002","5763556669","5626628485","5068955462","2113599387"];

    codes = secretCodes30;

    // DOM elements
    const targetWordElem = document.getElementById("target-word");
    const userInputElem = document.getElementById("user-input");
    const feedbackElem = document.getElementById("feedback");
    const startButton = document.getElementById("start-button");
    const timerElem = document.getElementById("timer");

    let currentIndex = 0;       // Which vocab pair we're on
    let totalTimeLimit = 0;     // In ms
    let timeRemaining = 0;      // In seconds
    let timerId = null;         // setTimeout for the final cutoff
    let countdownId = null;     // setInterval for the countdown display

    // Count "syllables" by counting Hangul blocks in a simple way (string length)
    function countKoreanBlocks(word) {
      return word.length; // Each Hangul character block → 1 syllable
    }

    // Shuffle the array in place if you want random order
    function shuffleArray(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    // Calculate total time limit = sum of all blocks * 4 (seconds), for example
    function calculateTotalTimeLimit() {
      let totalBlocks = 0;
      vocabList.forEach(pair => {
        totalBlocks += countKoreanBlocks(pair.korean);
      });
      return totalBlocks * 4 * 1000; // Adjust multiplier as desired
    }

    // Start the game
    function startGame() {
      // Shuffle if desired
      shuffleArray(vocabList);

      // Reset
      currentIndex = 0;
      feedbackElem.textContent = "";
      feedbackElem.className = "";

      // Enable input
      userInputElem.disabled = false;
      userInputElem.value = "";
      userInputElem.focus();
      startButton.disabled = true;

      // Calculate total time (ms) and convert to seconds for display
      totalTimeLimit = calculateTotalTimeLimit();
      timeRemaining = Math.floor(totalTimeLimit / 1000);

      // Clear any old timers
      clearTimeout(timerId);
      clearInterval(countdownId);

      // Display initial time left
      timerElem.textContent = `Time Left: ${timeRemaining}s`;

      // This timeout ends the game after the total time
      timerId = setTimeout(() => {
        endGame();
      }, totalTimeLimit);

      // Start the countdown display
      countdownId = setInterval(() => {
        timeRemaining--;
        if (timeRemaining <= 0) {
          timeRemaining = 0;
          timerElem.textContent = `Time Left: 0s`;
          clearInterval(countdownId);
        } else {
          timerElem.textContent = `Time Left: ${timeRemaining}s`;
        }
      }, 1000);

      // Show the first word
      showCurrentWord();
    }

    // Display the English meaning(s)
    function showCurrentWord() {
      if (currentIndex >= vocabList.length) {
        // All words typed correctly
        endGameEarly();
        return;
      }

      const currentPair = vocabList[currentIndex];
      // Show all English meanings joined by commas
      targetWordElem.textContent = currentPair.english.join(", ");

      userInputElem.value = "";
      userInputElem.disabled = false;
      userInputElem.focus();
    }

    // Check user's input (Korean)
    function checkInput() {
      if (currentIndex >= vocabList.length) {
        return;
      }

      const currentPair = vocabList[currentIndex];
      const userTyped = userInputElem.value.trim();

      // Compare directly to the single correct Korean word
      if (userTyped === currentPair.korean) {
        // Correct
        feedbackElem.textContent = "Correct!";
        feedbackElem.className = "correct";

        currentIndex++;

        setTimeout(() => {
          feedbackElem.textContent = "";
          feedbackElem.className = "";
          showCurrentWord();
        }, 800);
      } else {
        // Wrong - stay on the same word
        feedbackElem.textContent = "Close, but not quite! Try again!";
        feedbackElem.className = "wrong";
      }
    }

    // If user typed all words BEFORE the timer ends
    function endGameEarly() {
      clearTimeout(timerId);
      clearInterval(countdownId);

      userInputElem.disabled = true;
      startButton.disabled = false;

      // Randomly pick a code from the 10 defined codes
      const randomCode = codes[Math.floor(Math.random() * codes.length)];

      targetWordElem.textContent = "Congratulations! You've completed the game!";
      feedbackElem.textContent = `Your code is: ${randomCode}`;
      feedbackElem.className = "correct";
    }

    // When total time is up
    function endGame() {
      clearInterval(countdownId);
      userInputElem.disabled = true;
      startButton.disabled = false;

      if (currentIndex >= vocabList.length) {
        // All words completed before or right at the time limit
        const randomCode = codes[Math.floor(Math.random() * codes.length)];

        targetWordElem.textContent = "Congratulations! You've completed the game!";
        feedbackElem.textContent = `Your code is: ${randomCode}`;
        feedbackElem.className = "correct";
      } else {
        // Not completed in time
        targetWordElem.textContent = "Time’s up!";
        feedbackElem.textContent = "You’ve gone over the time. Please try again.";
        feedbackElem.className = "wrong";
      }
    }

    // Event Listeners
    startButton.addEventListener("click", startGame);

    userInputElem.addEventListener("keydown", (event) => {
      if (event.key === "Enter") {
        event.preventDefault();
        checkInput();
      }
    });
  </script>
</body>

</html>